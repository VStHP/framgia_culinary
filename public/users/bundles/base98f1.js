function youtube_parser(n){var t=n.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/),i=n.match(/([^#\&\?]*){11}/);return t!=null&&t&&t[7].length==11?t[7]:i!=null&&i[0].length==11?n:""}function numberOnly(n){var t=n||window.event,i=t.keyCode||t.which,r;i=String.fromCharCode(i);r=/[0-9]|\./;r.test(i)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}function openFacebookFriends(){$("#facebookFriendsPopup").modal({persist:!0,minHeight:310,minWidth:600,autoResize:!0});$(window).resize();var n=new Date;$("#facebookFriendsPopup.loading").show();$.get("/friend/GetFacebookFriends?t="+n.getTime(),function(n){$("#facebookFriendsPopup .loading").hide();$("#facebookFriendsPopup .content").html(n)})}function openCompleteFacebookSignupPopup(){$("#fbcompleteSignUpPopup").modal({persist:!0,minHeight:310,minWidth:600,autoResize:!0});$(window).resize();var n=new Date;$("#fbcompleteSignUpPopup.loading").show();$.get("/tai-khoan/hoan-tat-dang-ky?t="+n.getTime(),function(n){$("#fbcompleteSignUpPopup .loading").hide();$("#fbcompleteSignUpPopup .content").html(n);console.log(n)})}function requestCallback(){}function sendRequestViaMultiFriendSelector(){FB.ui({method:"send",link:"https://www.cooky.vn/dang-ky"})}function getParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function abbrNum(n,t){var r,i,u;for(t=Math.pow(10,t),r=["K","M","B","T"],i=r.length-1;i>=0;i--)if(u=Math.pow(10,(i+1)*3),u<=n){n=Math.round(n*t/u)/t;n==1e3&&i<r.length-1&&(n=1,i++);n+=r[i];break}return n}function redirectSearch(n,t,i){if(t&&t.keyCode==13){var r="";r=i?$("#base-href").val():"/blog/p1";n.value?r+="?q=":r=location.pathname;window.location.href=r+n.value}}function qaSearch(n,t){if(t&&t.keyCode==13){var i=$("#base-href").val();(i==null||i.length==0)&&(i="/hoi-dap");n.value?i+="?q=":i=location.pathname;window.location.href=i+n.value}}function searchVideo(n,t,i){if(t&&t.keyCode==13){var r=location.pathname;i&&(r=i);n.value&&(r+="?q=");window.location.href=r+n.value}}function h(n){$(n).css({height:"auto","overflow-y":"hidden"}).height(n.scrollHeight)}function goToByScroll(n){n=n.replace("link","");$("html,body").animate({scrollTop:$(n).offset().top},"slow")}function RelatedTime(n){var t=this;t.currentTimeStamp=n;setInterval(function(){t.currentTimeStamp+=10},1e4);t.periods=["giây","phút","giờ","ngày","tuần","tháng","năm","thập kỷ"];t.periodEns=["second","minute","hour","day","week","month","year","decade"];t.lengths=["60","60","24","7","4.35","12","10"];t.multiChars="s";t.getCurrentLanguageId=function(){return typeof languageId!="undefined"?languageId||1:1};t.getRelatedTime2=function(n,r,u){var f=n-r,o=t.getCurrentLanguageId(),e,s;for(i=0;f>=t.lengths[i]&&i<6;i++)f/=t.lengths[i];return f=Math.round(f),e=o===1?t.periods[i]:t.periodEns[i],f>1&&o!==1&&(e=e+"s"),i===0&&f<10&&(e=(o===1?"vài":"some")+" "+e,f=""),s="",i===6?u:f+" "+e+" "+(o===1?"trước":"ago")};t.getRelatedTime=function(n,i){return t.getRelatedTime2(t.currentTimeStamp,n,i)}}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1);if(t.indexOf(r)!==-1)return t.substring(r.length,t.length)}return""}function ToRatingTemplate(n){n||(n=".rating-stars-list");$(n).each(function(){var r=$(this),u=r.data("val"),t,i,n;if(typeof u=="undefined")return this;for(t="<div>",i=u/2,n=0;n<5;n++)t+=n<=i-1?'<span class="fa fa-star text-orange"><\/span>':Math.ceil(i-1)>=n?'<span class="fa fa-star-half-full text-orange"><\/span>':'<span class="fa fa-star text-gray"><\/span>';return t+="<\/div>",r.html(t)})}function MyAccountModel(){var n=this;n.AccountInfoModel;n.AccountContactModel;n.AccountProfileModel;n.AccountInfoContainerId;n.AccountContactContainerId;n.AccountProfileContainerId;n.IsRunning;n.LoadAccountInfo=function(){$.ajax({url:"/Account/GetAccountInfo",type:"POST",contentType:"application/json",success:function(t){t.Message!=null&&t.Message!=""||t.Result!=null&&(t.Result.Birthday=$.format.date(CommonHelper.ConvertJsonDate(t.Result.Birthday),"dd/MM/yyyy"),CommonHelper.HasKoBinding(n.AccountInfoContainerId)?ko.mapping.fromJS(t.Result,n.AccountInfoModel):(n.AccountInfoModel=ko.mapping.fromJS(t.Result),ko.applyBindings(n.AccountInfoModel,$("#"+n.AccountInfoContainerId)[0])))}})};n.UpdateAccountInfo=function(){var r,t,u,i;n.IsRunning||(r=$("#"+n.AccountInfoContainerId+" form"),r.valid()?(t=ko.mapping.toJS(n.AccountInfoModel),t.Birthday=CommonHelper.FormatDateTimeFromDDMM(t.Birthday),u={detail:t},$.ajax({url:"/Account/UpdateAccountInfo",data:JSON.stringify(u),type:"POST",contentType:"application/json",beforeSend:function(){n.IsRunning=!0},success:function(t){n.IsRunning=!1;t.Message!=null&&t.Message!=""?alert(t.Message):alert("Cập nhật thông tin thành công.")},error:function(){n.IsRunning=!1}})):(i=$("#"+n.AccountInfoContainerId+" form .input-validation-error:first").get(0),i&&i.focus()))};n.LoadAccountContact=function(){$.ajax({url:"/Account/GetAccountContact",type:"POST",contentType:"application/json",success:function(t){t.Message!=null&&t.Message!=""||t.Result!=null&&(CommonHelper.HasKoBinding(n.AccountContactContainerId)?(ko.mapping.fromJS(t.Result,n.AccountContactModel),n.AccountContactModel.DistrictId(t.Result.DistrictId)):(n.AccountContactModel=ko.mapping.fromJS(t.Result),ko.applyBindings(n.AccountContactModel,$("#"+n.AccountContactContainerId)[0])))}})};n.UpdateAccountContact=function(){var i,r,u,t;n.IsRunning||(i=$("#"+n.AccountContactContainerId+" form"),i.valid()?(r=ko.mapping.toJS(n.AccountContactModel),u={detail:r},$.ajax({url:"/Account/UpdateAccountContact",data:JSON.stringify(u),type:"POST",contentType:"application/json",beforeSend:function(){n.IsRunning=!0},success:function(t){n.IsRunning=!1;t.Message!=null&&t.Message!=""?alert(t.Message):alert("Cập nhật thông tin thành công.")},error:function(){n.IsRunning=!1}})):(t=$("#"+n.AccountContactContainerId+" form .input-validation-error:first").get(0),t&&t.focus()))};n.LoadAccountProfile=function(){$.ajax({url:"/Account/GetAccountProfile",type:"POST",contentType:"application/json",success:function(t){t.Message!=null&&t.Message!=""||t.Result!=null&&(CommonHelper.HasKoBinding(n.AccountProfileContainerId)?(ko.mapping.fromJS(t.Result,n.AccountProfileModel),n.AccountProfileModel.DistrictId(t.Result.DistrictId)):(n.AccountProfileModel=ko.mapping.fromJS(t.Result),ko.applyBindings(n.AccountProfileModel,$("#"+n.AccountProfileContainerId)[0])))}})};n.UpdateAccountProfile=function(){var i,r,u,t;n.IsRunning||(i=$("#"+n.AccountProfileContainerId+" form"),i.valid()?(r=ko.mapping.toJS(n.AccountProfileModel),u={detail:r},$.ajax({url:"/Account/UpdateAccountProfile",data:JSON.stringify(u),type:"POST",contentType:"application/json",beforeSend:function(){n.IsRunning=!0},success:function(t){n.IsRunning=!1;t.Message!=null&&t.Message!=""?alert(t.Message):alert("Cập nhật thông tin thành công.")},error:function(){n.IsRunning=!1}})):(t=$("#"+n.AccountProfileContainerId+" form .input-validation-error:first").get(0),t&&t.focus()))};n.LoadDistrict=function(t){if(document.activeElement==t){var i={stateProvinceId:$("#StateProvinceId").val()};$.ajax({url:"/Common/GetAllDistrictByStateProvince",data:JSON.stringify(i),type:"POST",contentType:"application/json",success:function(t){t.Message!=null&&t.Message!=""||t.Result!=null&&n.AccountContactModel.LstDistrict(t.Result)}})}};n.Init=function(t){t=$.extend({},{accountInfoContainerId:"thong-tin",accountContactContainerId:"lien-he",accountProfileContainerId:"gioi-thieu"},t);n.AccountInfoContainerId=t.accountInfoContainerId;n.AccountContactContainerId=t.accountContactContainerId;n.AccountProfileContainerId=t.accountProfileContainerId;n.IsRunning=!1;n.LoadAccountInfo();n.LoadAccountContact();n.LoadAccountProfile();$("#StateProvinceId").change(function(){n.LoadDistrict(this)})}}function rePositionPhoto(){$(".cookybox-body").width()<=560?($(".cookybox-container").css({overflow:"auto"}),$(".cookybox-body").css({position:"relative",display:"block",width:"100%"}),$(".cookybox-sidebar").css({position:"relative",overflow:"initial",width:"100%"})):($(".cookybox-container").css({overflow:"initial"}),$(".cookybox-body").css({position:"absolute",display:"table-cell",width:"100%"}),$(".cookybox-sidebar").css({position:"absolute",overflow:"auto",width:"0"}));var n=$(".cookybox-photo-big"),t=n.width(),i=n.height();$(".cookybox-photo-big").find("img.big-photo").each(function(){var n=$(this),r,u;n&&(r=n.width(),u=n.height(),n.css({left:t-r>0?(t-r)/2+"px":0,top:i-u>0?(i-u)/2+"px":0}))})}function resizeCartList(){$("#cookybox-wrapper .cookybox-sidebar").css({overflow:"hidden"});window.setTimeout(function(){var t=$("#cartViewTab"),r=$("#ingredientTab"),i=$("#cookybox-wrapper .list-inline.recipe-ingredient-list"),u=$("#cookybox-wrapper .cookybox-sidebar.scrollbar-macosx"),n;r.length>0&&$("#cookybox-wrapper .recipe-ingredient-box").css({height:r.height()-184,overflow:"auto"});t.length>0&&t.hasClass("active")&&i.length>0&&i.children().length>0&&u.length>0&&(n=0,$.each(i.children(),function(){n+=$(this).height()}),n>0&&($("#cookybox-wrapper .ingredient-shopcart-list").css({height:t.height()-174,overflow:"auto"}),$("#cookybox-wrapper .ingredient-shopcart-list-content").css({height:n-200})))},300)}var recipeGallery,CommonHelper,loadingImgSrc,progressIndicator,cModal,notifications,friendRequests,SocialHelper,UserHelper,userTooltipApp,bindingAngularBootstrapForCookyTooltip,userModule,userLinkApp,FriendRequestModel,NotificationListModel,app,searchApp,photoViewer;(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){var r=[],e=n(document),u=navigator.userAgent.toLowerCase(),f=n(window),i=[],t={ieQuirks:null,msie:/msie/.test(u)&&!/opera/.test(u),opera:/opera/.test(u)};t.ie6=t.msie&&/msie 6./.test(u)&&typeof XMLHttpRequest!="object";t.ie7=t.msie&&/msie 7.0/.test(u);n.modal=function(t,i){return n.modal.impl.init(t,i)};n.modal.close=function(){n.modal.impl.close()};n.modal.focus=function(t){n.modal.impl.focus(t)};n.modal.setContainerDimensions=function(){n.modal.impl.setContainerDimensions()};n.modal.setPosition=function(){n.modal.impl.setPosition()};n.modal.update=function(t,i){n.modal.impl.update(t,i)};n.fn.modal=function(t){return n.modal.impl.init(this,t)};n.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"><\/a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};n.modal.impl={d:{},init:function(i,r){var u=this;if(u.d.data)return!1;if(t.ieQuirks=t.msie&&!n.support.boxModel,u.o=n.extend({},n.modal.defaults,r),u.zIndex=u.o.zIndex,u.occb=!1,typeof i=="object")i=i instanceof n?i:n(i),u.d.placeholder=!1,i.parent().parent().size()>0&&(i.before(n("<span><\/span>").attr("id","simplemodal-placeholder").css({display:"none"})),u.d.placeholder=!0,u.display=i.css("display"),u.o.persist||(u.d.orig=i.clone(!0)));else if(typeof i=="string"||typeof i=="number")i=n("<div><\/div>").html(i);else return alert("SimpleModal Error: Unsupported data type: "+typeof i),u;return u.create(i),i=null,u.open(),n.isFunction(u.o.onShow)&&u.o.onShow.apply(u,[u.d]),u},create:function(u){var f=this;f.getDimensions();f.o.modal&&t.ie6&&(f.d.iframe=n('<iframe src="javascript:false;"><\/iframe>').css(n.extend(f.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:i[0],width:i[1],zIndex:f.o.zIndex,top:0,left:0})).appendTo(f.o.appendTo));f.d.overlay=n("<div><\/div>").attr("id",f.o.overlayId).addClass("simplemodal-overlay").css(n.extend(f.o.overlayCss,{display:"none",opacity:f.o.opacity/100,height:f.o.modal?r[0]:0,width:f.o.modal?r[1]:0,position:"fixed",left:0,top:0,zIndex:f.o.zIndex+1})).appendTo(f.o.appendTo);f.d.container=n("<div><\/div>").attr("id",f.o.containerId).addClass("simplemodal-container").css(n.extend({position:f.o.fixed?"fixed":"absolute"},f.o.containerCss,{display:"none",zIndex:f.o.zIndex+2})).append(f.o.close&&f.o.closeHTML?n(f.o.closeHTML).addClass(f.o.closeClass):"").appendTo(f.o.appendTo);f.d.wrap=n("<div><\/div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(f.d.container);f.d.data=u.attr("id",u.attr("id")||f.o.dataId).addClass("simplemodal-data").css(n.extend(f.o.dataCss,{display:"none"})).appendTo("body");u=null;f.setContainerDimensions();f.d.data.appendTo(f.d.wrap);(t.ie6||t.ieQuirks)&&f.fixIE()},bindEvents:function(){var u=this;n("."+u.o.closeClass).bind("click.simplemodal",function(n){n.preventDefault();u.close()});u.o.modal&&u.o.close&&u.o.overlayClose&&u.d.overlay.bind("click.simplemodal",function(n){n.preventDefault();u.close()});e.bind("keydown.simplemodal",function(n){u.o.modal&&n.keyCode===9?u.watchTab(n):u.o.close&&u.o.escClose&&n.keyCode===27&&(n.preventDefault(),u.close())});f.bind("resize.simplemodal orientationchange.simplemodal",function(){u.getDimensions();u.o.autoResize?u.setContainerDimensions():u.o.autoPosition&&u.setPosition();t.ie6||t.ieQuirks?u.fixIE():u.o.modal&&(u.d.iframe&&u.d.iframe.css({height:i[0],width:i[1]}),u.d.overlay.css({height:r[0],width:r[1]}))})},unbindEvents:function(){n("."+this.o.closeClass).unbind("click.simplemodal");e.unbind("keydown.simplemodal");f.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var i=this,t=i.o.position;n.each([i.d.iframe||null,i.o.modal?i.d.overlay:null,i.d.container.css("position")==="fixed"?i.d.container:null],function(n,i){var a,v,s,h;if(i){var e="document.body.clientHeight",o="document.body.clientWidth",y="document.body.scrollHeight",c="document.body.scrollLeft",l="document.body.scrollTop",p="document.body.scrollWidth",w="document.documentElement.clientHeight",b="document.documentElement.clientWidth",u="document.documentElement.scrollLeft",f="document.documentElement.scrollTop",r=i[0].style;r.position="absolute";n<2?(r.removeExpression("height"),r.removeExpression("width"),r.setExpression("height",""+y+" > "+e+" ? "+y+" : "+e+' + "px"'),r.setExpression("width",""+p+" > "+o+" ? "+p+" : "+o+' + "px"')):(t&&t.constructor===Array?(s=t[0]?typeof t[0]=="number"?t[0].toString():t[0].replace(/px/,""):i.css("top").replace(/px/,""),a=s.indexOf("%")===-1?s+" + (t = "+f+" ? "+f+" : "+l+') + "px"':parseInt(s.replace(/%/,""))+" * (("+w+" || "+e+") / 100) + (t = "+f+" ? "+f+" : "+l+') + "px"',t[1]&&(h=typeof t[1]=="number"?t[1].toString():t[1].replace(/px/,""),v=h.indexOf("%")===-1?h+" + (t = "+u+" ? "+u+" : "+c+') + "px"':parseInt(h.replace(/%/,""))+" * (("+b+" || "+o+") / 100) + (t = "+u+" ? "+u+" : "+c+') + "px"')):(a="("+w+" || "+e+") / 2 - (this.offsetHeight / 2) + (t = "+f+" ? "+f+" : "+l+') + "px"',v="("+b+" || "+o+") / 2 - (this.offsetWidth / 2) + (t = "+u+" ? "+u+" : "+c+') + "px"'),r.removeExpression("top"),r.removeExpression("left"),r.setExpression("top",a),r.setExpression("left",v))}})},focus:function(t){var i=this,u=t&&n.inArray(t,["first","last"])!==-1?t:"first",r=n(":input:enabled:visible:"+u,i.d.wrap);setTimeout(function(){r.length>0?r.focus():i.d.wrap.focus()},10)},getDimensions:function(){var t=this,n=typeof innerHeight=="undefined"?f.height():window.innerHeight;r=[e.height(),e.width()];i=[n,f.width()]},getVal:function(n,t){return n?typeof n=="number"?n:n==="auto"?0:n.indexOf("%")>0?parseInt(n.replace(/%/,""))/100*(t==="h"?i[0]:i[1]):parseInt(n.replace(/px/,"")):null},update:function(n,t){var i=this;if(!i.d.data)return!1;i.d.origHeight=i.getVal(n,"h");i.d.origWidth=i.getVal(t,"w");i.d.data.hide();n&&i.d.container.css("height",n);t&&i.d.container.css("width",t);i.setContainerDimensions();i.d.data.show();i.o.focus&&i.focus();i.unbindEvents();i.bindEvents()},setContainerDimensions:function(){var n=this,v=t.ie6||t.ie7,r=n.d.origHeight?n.d.origHeight:t.opera?n.d.container.height():n.getVal(v?n.d.container[0].currentStyle.height:n.d.container.css("height"),"h"),u=n.d.origWidth?n.d.origWidth:t.opera?n.d.container.width():n.getVal(v?n.d.container[0].currentStyle.width:n.d.container.css("width"),"w"),o=n.d.data.outerHeight(!0),s=n.d.data.outerWidth(!0),f;n.d.origHeight=n.d.origHeight||r;n.d.origWidth=n.d.origWidth||u;var l=n.o.maxHeight?n.getVal(n.o.maxHeight,"h"):null,a=n.o.maxWidth?n.getVal(n.o.maxWidth,"w"):null,h=l&&l<i[0]?l:i[0],c=a&&a<i[1]?a:i[1],e=n.o.minHeight?n.getVal(n.o.minHeight,"h"):"auto";r=r?n.o.autoResize&&r>h?h:r<e?e:r:o?o>h?h:n.o.minHeight&&e!=="auto"&&o<e?e:o:e;f=n.o.minWidth?n.getVal(n.o.minWidth,"w"):"auto";u=u?n.o.autoResize&&u>c?c:u<f?f:u:s?s>c?c:n.o.minWidth&&f!=="auto"&&s<f?f:s:f;n.d.container.css({height:r,width:u});n.d.wrap.css({overflow:o>r||s>u?"auto":"visible"});n.o.autoPosition&&n.setPosition()},setPosition:function(){var n=this,t,r,u=i[0]/2-n.d.container.outerHeight(!0)/2,e=i[1]/2-n.d.container.outerWidth(!0)/2,o=n.d.container.css("position")!=="fixed"?f.scrollTop():0;n.o.position&&Object.prototype.toString.call(n.o.position)==="[object Array]"?(t=o+(n.o.position[0]||u),r=n.o.position[1]||e):(t=o+u,r=e);n.d.container.css({left:r,top:t})},watchTab:function(t){var i=this,r;n(t.target).parents(".simplemodal-container").length>0?(i.inputs=n(":input:enabled:visible:first, :input:enabled:visible:last",i.d.data[0]),(!t.shiftKey&&t.target===i.inputs[i.inputs.length-1]||t.shiftKey&&t.target===i.inputs[0]||i.inputs.length===0)&&(t.preventDefault(),r=t.shiftKey?"last":"first",i.focus(r))):(t.preventDefault(),i.focus())},open:function(){var t=this;t.d.iframe&&t.d.iframe.show();n.isFunction(t.o.onOpen)?t.o.onOpen.apply(t,[t.d]):(t.d.overlay.show(),t.d.container.show(),t.d.data.show());t.o.focus&&t.focus();t.bindEvents()},close:function(){var t=this,i;if(!t.d.data)return!1;t.unbindEvents();n.isFunction(t.o.onClose)&&!t.occb?(t.occb=!0,t.o.onClose.apply(t,[t.d])):(t.d.placeholder?(i=n("#simplemodal-placeholder"),t.o.persist?i.replaceWith(t.d.data.removeClass("simplemodal-data").css("display",t.display)):(t.d.data.hide().remove(),i.replaceWith(t.d.orig))):t.d.data.hide().remove(),t.d.container.hide().remove(),t.d.overlay.hide(),t.d.iframe&&t.d.iframe.hide().remove(),t.d.overlay.remove(),t.d={})}}});recipeGallery=angular.module("recipeGallery",[]);recipeGallery.controller("GalleryController",["$scope",function(n){n.systemPhotos=listPhotos.SystemPhotos;n.userPhotos=listPhotos.UserPhotos}]);recipeGallery.directive("cookySimplePhotoList",function(){return{restrict:"E",templateUrl:"/ngtpl/simple-photo-list",scope:{model:"=",groupType:"="},controller:["$scope","$http",function(n,t){n.isloading=!1;n.totalRemaining=n.model.Total-n.model.Count;n.lastId=n.model.LastId;n.requestCount=n.model.Count;n.total=n.model.Total;n.loadmore=function(){if(!n.isloading&&n.totalRemaining>0){n.isloading=!0;var i="/photo/"+n.model.ReferenceType+"/"+n.model.ReferenceId+"/getmore?lastId="+n.lastId;i+="&requestCount="+n.requestCount+"&width=170&height=170";n.model.IsSystem!=null&&(i+="&isSystem="+n.model.IsSystem);t({method:"GET",url:i,cache:!1}).success(function(t){var i,r;if(t.success){for(i=t.data,n.totalRemaining=i.Total-i.Count,r=0;r<i.Items.length;r++)n.model.Items.push(i.Items[r]);n.lastId=i.LastId}n.isloading=!1})}}}]}}),function(n){var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=["January","February","March","April","May","June","July","August","September","October","November","December"],t=[];t.Jan="01";t.Feb="02";t.Mar="03";t.Apr="04";t.May="05";t.Jun="06";t.Jul="07";t.Aug="08";t.Sep="09";t.Oct="10";t.Nov="11";t.Dec="12";n.format=function(){function o(n){return i[parseInt(n,10)]||n}function s(n){var t=parseInt(n,10)-1;return r[t]||n}function h(n){var t=parseInt(n,10)-1;return u[t]||n}var e=function(n){return t[n]||n},n=function(n){var t=n,u="",r,i;return t.indexOf(".")!==-1&&(r=t.split("."),t=r[0],u=r[1]),i=t.split(":"),i.length===3?(hour=i[0],minute=i[1],second=i[2],{time:t,hour:hour,minute:minute,second:second,millis:u}):{time:"",hour:"",minute:"",second:"",millis:""}},f=function(n,t){for(var r=t-String(n).length,i=0;i<r;i++)n="0"+n;return n};return{date:function(t,i){var v,a,y,g,d;try{var b=null,w=null,p=null,u=null,k=null,l=null;if(typeof t=="number")return this.date(new Date(t),i);if(typeof t.getFullYear=="function")w=t.getFullYear(),p=t.getMonth()+1,u=t.getDate(),k=t.getDay(),l=n(t.toTimeString());else if(t.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/)!=-1)v=t.split(/[T\+-]/),w=v[0],p=v[1],u=v[2],l=n(v[3].split(".")[0]),b=new Date(w,p-1,u),k=b.getDay();else{v=t.split(" ");switch(v.length){case 6:w=v[5];p=e(v[1]);u=v[2];l=n(v[3]);b=new Date(w,p-1,u);k=b.getDay();break;case 2:a=v[0].split("-");w=a[0];p=a[1];u=a[2];l=n(v[1]);b=new Date(w,p-1,u);k=b.getDay();break;case 7:case 9:case 10:w=v[3];p=e(v[1]);u=v[2];l=n(v[4]);b=new Date(w,p-1,u);k=b.getDay();break;case 1:a=v[0].split("");w=a[0]+a[1]+a[2]+a[3];p=a[5]+a[6];u=a[8]+a[9];l=n(a[13]+a[14]+a[15]+a[16]+a[17]+a[18]+a[19]+a[20]);b=new Date(w,p-1,u);k=b.getDay();break;default:return t}}var r="",c="",nt="";for(y=0;y<i.length;y++){g=i.charAt(y);r+=g;nt="";switch(r){case"ddd":c+=o(k);r="";break;case"dd":if(i.charAt(y+1)=="d")break;c+=f(u,2);r="";break;case"d":if(i.charAt(y+1)=="d")break;c+=parseInt(u,10);r="";break;case"D":u=u==1||u==21||u==31?u+"st":u==2||u==22?u+"nd":u==3||u==23?u+"rd":u+"th";c+=u;r="";break;case"MMMM":c+=h(p);r="";break;case"MMM":if(i.charAt(y+1)==="M")break;c+=s(p);r="";break;case"MM":if(i.charAt(y+1)=="M")break;c+=f(p,2);r="";break;case"M":if(i.charAt(y+1)=="M")break;c+=parseInt(p,10);r="";break;case"y":case"yyy":if(i.charAt(y+1)=="y")break;c+=r;r="";break;case"yy":if(i.charAt(y+1)=="y"&&i.charAt(y+2)=="y")break;c+=String(w).slice(-2);r="";break;case"yyyy":c+=w;r="";break;case"HH":c+=f(l.hour,2);r="";break;case"H":if(i.charAt(y+1)=="H")break;c+=parseInt(l.hour,10);r="";break;case"hh":d=l.hour==0?12:l.hour<13?l.hour:l.hour-12;c+=f(d,2);r="";break;case"h":if(i.charAt(y+1)=="h")break;d=l.hour==0?12:l.hour<13?l.hour:l.hour-12;c+=parseInt(d,10);r="";break;case"mm":c+=f(l.minute,2);r="";break;case"m":if(i.charAt(y+1)=="m")break;c+=l.minute;r="";break;case"ss":c+=f(l.second.substring(0,2),2);r="";break;case"s":if(i.charAt(y+1)=="s")break;c+=l.second;r="";break;case"S":case"SS":if(i.charAt(y+1)=="S")break;c+=r;r="";break;case"SSS":c+=l.millis.substring(0,3);r="";break;case"a":c+=l.hour>=12?"PM":"AM";r="";break;case"p":c+=l.hour>=12?"p.m.":"a.m.";r="";break;default:c+=g;r=""}}return c+nt}catch(tt){return console.log(tt),t}}}}()}(jQuery);jQuery.format.date.defaultShortDateFormat="dd/MM/yyyy";jQuery.format.date.defaultLongDateFormat="dd/MM/yyyy HH:mm:ss";jQuery(document).ready(function(){jQuery(".shortDateFormat").each(function(n,t){jQuery(t).is(":input")?jQuery(t).val(jQuery.format.date(jQuery(t).val(),jQuery.format.date.defaultShortDateFormat)):jQuery(t).text(jQuery.format.date(jQuery(t).text(),jQuery.format.date.defaultShortDateFormat))});jQuery(".longDateFormat").each(function(n,t){jQuery(t).is(":input")?jQuery(t).val(jQuery.format.date(jQuery(t).val(),jQuery.format.date.defaultLongDateFormat)):jQuery(t).text(jQuery.format.date(jQuery(t).text(),jQuery.format.date.defaultLongDateFormat))})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){"use strict";var t=window.Slick||{};t=function(){function t(t,r){var f,e,u=this;if(u.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:n(t),appendDots:n(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous<\/button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next<\/button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(n,t){return'<button type="button" data-role="none">'+(t+1)+"<\/button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,pauseOnHover:!0,pauseOnDotsHover:!1,responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,touchMove:!0,touchThreshold:5,useCSS:!0,vertical:!1,waitForAnimate:!0},u.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentSlide:0,currentLeft:null,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},n.extend(u,u.initials),u.activeBreakpoint=null,u.animType=null,u.animProp=null,u.breakpoints=[],u.breakpointSettings=[],u.cssTransitions=!1,u.paused=!1,u.positionProp=null,u.$slider=n(t),u.$slidesCache=null,u.transformType=null,u.transitionType=null,u.windowWidth=0,u.windowTimer=null,u.options=n.extend({},u.defaults,r),u.originalSettings=u.options,f=u.options.responsive||null,f&&f.length>-1){for(e in f)f.hasOwnProperty(e)&&(u.breakpoints.push(f[e].breakpoint),u.breakpointSettings[f[e].breakpoint]=f[e].settings);u.breakpoints.sort(function(n,t){return t-n})}u.autoPlay=n.proxy(u.autoPlay,u);u.autoPlayClear=n.proxy(u.autoPlayClear,u);u.changeSlide=n.proxy(u.changeSlide,u);u.selectHandler=n.proxy(u.selectHandler,u);u.setPosition=n.proxy(u.setPosition,u);u.swipeHandler=n.proxy(u.swipeHandler,u);u.dragHandler=n.proxy(u.dragHandler,u);u.keyHandler=n.proxy(u.keyHandler,u);u.autoPlayIterator=n.proxy(u.autoPlayIterator,u);u.instanceUid=i++;u.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;u.init()}var i=0;return t}();t.prototype.addSlide=function(t,i,r){var u=this;if("boolean"==typeof i)r=i,i=null;else if(0>i||i>=u.slideCount)return!1;u.unload();"number"==typeof i?0===i&&0===u.$slides.length?n(t).appendTo(u.$slideTrack):r?n(t).insertBefore(u.$slides.eq(i)):n(t).insertAfter(u.$slides.eq(i)):r===!0?n(t).prependTo(u.$slideTrack):n(t).appendTo(u.$slideTrack);u.$slides=u.$slideTrack.children(this.options.slide);u.$slideTrack.children(this.options.slide).detach();u.$slideTrack.append(u.$slides);u.$slides.each(function(t,i){n(i).attr("index",t)});u.$slidesCache=u.$slides;u.reinit()};t.prototype.animateSlide=function(t,i){var u={},r=this,f;1===r.options.slidesToShow&&r.options.adaptiveHeight===!0&&r.options.vertical===!1&&(f=r.$slides.eq(r.currentSlide).outerHeight(!0),r.$list.animate({height:f},r.options.speed));r.options.rtl===!0&&r.options.vertical===!1&&(t=-t);r.transformsEnabled===!1?r.options.vertical===!1?r.$slideTrack.animate({left:t},r.options.speed,r.options.easing,i):r.$slideTrack.animate({top:t},r.options.speed,r.options.easing,i):r.cssTransitions===!1?n({animStart:r.currentLeft}).animate({animStart:t},{duration:r.options.speed,easing:r.options.easing,step:function(n){r.options.vertical===!1?(u[r.animType]="translate("+n+"px, 0px)",r.$slideTrack.css(u)):(u[r.animType]="translate(0px,"+n+"px)",r.$slideTrack.css(u))},complete:function(){i&&i.call()}}):(r.applyTransition(),u[r.animType]=r.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",r.$slideTrack.css(u),i&&setTimeout(function(){r.disableTransition();i.call()},r.options.speed))};t.prototype.applyTransition=function(n){var t=this,i={};i[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase;t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(n).css(i)};t.prototype.autoPlay=function(){var n=this;n.autoPlayTimer&&clearInterval(n.autoPlayTimer);n.slideCount>n.options.slidesToShow&&n.paused!==!0&&(n.autoPlayTimer=setInterval(n.autoPlayIterator,n.options.autoplaySpeed))};t.prototype.autoPlayClear=function(){var n=this;n.autoPlayTimer&&clearInterval(n.autoPlayTimer)};t.prototype.autoPlayIterator=function(){var t=this,i=null!=t.options.asNavFor?n(t.options.asNavFor).getSlick():null;t.options.infinite===!1?1===t.direction?(t.currentSlide+1===t.slideCount-1&&(t.direction=0),t.slideHandler(t.currentSlide+t.options.slidesToScroll),null!=i&&i.slideHandler(i.currentSlide+i.options.slidesToScroll)):(0==t.currentSlide-1&&(t.direction=1),t.slideHandler(t.currentSlide-t.options.slidesToScroll),null!=i&&i.slideHandler(i.currentSlide-i.options.slidesToScroll)):(t.slideHandler(t.currentSlide+t.options.slidesToScroll),null!=i&&i.slideHandler(i.currentSlide+i.options.slidesToScroll))};t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=n(t.options.prevArrow),t.$nextArrow=n(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))};t.prototype.buildDots=function(){var i,r,t=this;if(t.options.dots===!0&&t.slideCount>t.options.slidesToShow){for(r='<ul class="'+t.options.dotsClass+'">',i=0;i<=t.getDotCount();i+=1)r+="<li>"+t.options.customPaging.call(this,t,i)+"<\/li>";r+="<\/ul>";t.$dots=n(r).appendTo(t.options.appendDots);t.$dots.find("li").first().addClass("slick-active")}};t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide");t.slideCount=t.$slides.length;t.$slides.each(function(t,i){n(i).attr("index",t)});t.$slidesCache=t.$slides;t.$slider.addClass("slick-slider");t.$slideTrack=0===t.slideCount?n('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent();t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent();t.$slideTrack.css("opacity",0);t.options.centerMode===!0&&(t.options.slidesToScroll=1,0==t.options.slidesToShow%2&&(t.options.slidesToShow=3));n("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading");t.setupInfinite();t.buildArrows();t.buildDots();t.updateDots();t.options.accessibility===!0&&t.$list.prop("tabIndex",0);t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0);t.options.draggable===!0&&t.$list.addClass("draggable")};t.prototype.checkResponsive=function(){var r,i,t=this;if(t.originalSettings.responsive&&t.originalSettings.responsive.length>-1&&null!==t.originalSettings.responsive){i=null;for(r in t.breakpoints)t.breakpoints.hasOwnProperty(r)&&n(window).width()<t.breakpoints[r]&&(i=t.breakpoints[r]);null!==i?null!==t.activeBreakpoint?i!==t.activeBreakpoint&&(t.activeBreakpoint=i,t.options=n.extend({},t.options,t.breakpointSettings[i]),t.refresh()):(t.activeBreakpoint=i,t.options=n.extend({},t.options,t.breakpointSettings[i]),t.refresh()):null!==t.activeBreakpoint&&(t.activeBreakpoint=null,t.options=n.extend({},t.options,t.originalSettings),t.refresh())}};t.prototype.changeSlide=function(t){var i=this,f=n(t.target),r=null!=i.options.asNavFor?n(i.options.asNavFor).getSlick():null,u;switch(f.is("a")&&t.preventDefault(),t.data.message){case"previous":i.slideCount>i.options.slidesToShow&&(i.slideHandler(i.currentSlide-i.options.slidesToScroll),null!=r&&r.slideHandler(r.currentSlide-r.options.slidesToScroll));break;case"next":i.slideCount>i.options.slidesToShow&&(i.slideHandler(i.currentSlide+i.options.slidesToScroll),null!=r&&r.slideHandler(r.currentSlide+r.options.slidesToScroll));break;case"index":u=0===t.data.index?0:t.data.index||n(t.target).parent().index()*i.options.slidesToScroll;i.slideHandler(u);null!=r&&r.slideHandler(u);default:return!1}};t.prototype.destroy=function(){var t=this;t.autoPlayClear();t.touchObject={};n(".slick-cloned",t.$slider).remove();t.$dots&&t.$dots.remove();t.$prevArrow&&(t.$prevArrow.remove(),t.$nextArrow.remove());t.$slides.parent().hasClass("slick-track")&&t.$slides.unwrap().unwrap();t.$slides.removeClass("slick-slide slick-active slick-visible").css("width","");t.$slider.removeClass("slick-slider");t.$slider.removeClass("slick-initialized");t.$list.off(".slick");n(window).off(".slick-"+t.instanceUid);n(document).off(".slick-"+t.instanceUid)};t.prototype.disableTransition=function(n){var t=this,i={};i[t.transitionType]="";t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(n).css(i)};t.prototype.fadeSlide=function(n,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(n).css({zIndex:1e3}),i.$slides.eq(n).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(n),i.$slides.eq(n).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){i.disableTransition(n);t.call()},i.options.speed))};t.prototype.filterSlides=function(n){var t=this;null!==n&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(n).appendTo(t.$slideTrack),t.reinit())};t.prototype.getCurrent=function(){var n=this;return n.currentSlide};t.prototype.getDotCount=function(){for(var n=this,i=0,r=0,u=0,t=n.options.infinite===!0?n.slideCount+n.options.slidesToShow-n.options.slidesToScroll:n.slideCount;t>i;)u++,r+=n.options.slidesToScroll,i=r+n.options.slidesToShow;return u};t.prototype.getLeft=function(n){var u,i,t=this,r=0;return t.slideOffset=0,i=t.$slides.first().outerHeight(),t.options.infinite===!0?(t.slideCount>t.options.slidesToShow&&(t.slideOffset=-1*t.slideWidth*t.options.slidesToShow,r=-1*i*t.options.slidesToShow),0!=t.slideCount%t.options.slidesToScroll&&n+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow&&(t.slideOffset=-1*t.slideCount%t.options.slidesToShow*t.slideWidth,r=-1*t.slideCount%t.options.slidesToShow*i)):0!=t.slideCount%t.options.slidesToShow&&n+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow&&(t.slideOffset=t.options.slidesToShow*t.slideWidth-t.slideCount%t.options.slidesToShow*t.slideWidth,r=t.slideCount%t.options.slidesToShow*i),t.options.centerMode===!0&&t.options.infinite===!0?t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)-t.slideWidth:t.options.centerMode===!0&&(t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)),u=t.options.vertical===!1?-1*n*t.slideWidth+t.slideOffset:-1*n*i+r};t.prototype.init=function(){var t=this;n(t.$slider).hasClass("slick-initialized")||(n(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.checkResponsive());null!==t.options.onInit&&t.options.onInit.call(this,t)};t.prototype.initArrowEvents=function(){var n=this;n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.on("click.slick",{message:"previous"},n.changeSlide),n.$nextArrow.on("click.slick",{message:"next"},n.changeSlide))};t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&n("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide);t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&n("li",t.$dots).on("mouseenter.slick",t.autoPlayClear).on("mouseleave.slick",t.autoPlay)};t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents();t.initDotEvents();t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler);t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler);t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler);t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler);t.options.pauseOnHover===!0&&t.options.autoplay===!0&&(t.$list.on("mouseenter.slick",t.autoPlayClear),t.$list.on("mouseleave.slick",t.autoPlay));t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler);t.options.focusOnSelect===!0&&n(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler);n(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive();t.setPosition()});n(window).on("resize.slick.slick-"+t.instanceUid,function(){n(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=n(window).width();t.checkResponsive();t.setPosition()},50))});n(window).on("load.slick.slick-"+t.instanceUid,t.setPosition);n(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)};t.prototype.initUI=function(){var n=this;n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.show(),n.$nextArrow.show());n.options.dots===!0&&n.slideCount>n.options.slidesToShow&&n.$dots.show();n.options.autoplay===!0&&n.autoPlay()};t.prototype.keyHandler=function(n){var t=this;37===n.keyCode?t.changeSlide({data:{message:"previous"}}):39===n.keyCode&&t.changeSlide({data:{message:"next"}})};t.prototype.lazyLoad=function(){function f(t){n("img[data-lazy]",t).each(function(){var t=n(this),i=n(this).attr("data-lazy")+"?"+(new Date).getTime();t.load(function(){t.animate({opacity:1},200)}).css({opacity:0}).attr("src",i).removeAttr("data-lazy").removeClass("slick-loading")})}var e,r,i,u,t=this;t.options.centerMode===!0?t.options.infinite===!0?(i=t.currentSlide+(t.options.slidesToShow/2+1),u=i+t.options.slidesToShow+2):(i=Math.max(0,t.currentSlide-(t.options.slidesToShow/2+1)),u=2+(t.options.slidesToShow/2+1)+t.currentSlide):(i=t.options.infinite?t.options.slidesToShow+t.currentSlide:t.currentSlide,u=i+t.options.slidesToShow,t.options.fade===!0&&(i>0&&i--,u<=t.slideCount&&u++));e=t.$slider.find(".slick-slide").slice(i,u);f(e);t.slideCount<=t.options.slidesToShow?(r=t.$slider.find(".slick-slide"),f(r)):t.currentSlide>=t.slideCount-t.options.slidesToShow?(r=t.$slider.find(".slick-cloned").slice(0,t.options.slidesToShow),f(r)):0===t.currentSlide&&(r=t.$slider.find(".slick-cloned").slice(-1*t.options.slidesToShow),f(r))};t.prototype.loadSlider=function(){var n=this;n.setPosition();n.$slideTrack.css({opacity:1});n.$slider.removeClass("slick-loading");n.initUI();"progressive"===n.options.lazyLoad&&n.progressiveLazyLoad()};t.prototype.postSlide=function(n){var t=this;null!==t.options.onAfterChange&&t.options.onAfterChange.call(this,t,n);t.animating=!1;t.setPosition();t.swipeLeft=null;t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()};t.prototype.progressiveLazyLoad=function(){var r,t,i=this;r=n("img[data-lazy]").length;r>0&&(t=n("img[data-lazy]",i.$slider).first(),t.attr("src",t.attr("data-lazy")).removeClass("slick-loading").load(function(){t.removeAttr("data-lazy");i.progressiveLazyLoad()}).error(function(){t.removeAttr("data-lazy");i.progressiveLazyLoad()}))};t.prototype.refresh=function(){var t=this,i=t.currentSlide;t.destroy();n.extend(t,t.initials);t.currentSlide=i;t.init()};t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide");t.slideCount=t.$slides.length;t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll);t.setProps();t.setupInfinite();t.buildArrows();t.updateArrows();t.initArrowEvents();t.buildDots();t.updateDots();t.initDotEvents();t.options.focusOnSelect===!0&&n(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler);t.setSlideClasses(0);t.setPosition();null!==t.options.onReInit&&t.options.onReInit.call(this,t)};t.prototype.removeSlide=function(n,t){var i=this;return"boolean"==typeof n?(t=n,n=t===!0?0:i.slideCount-1):n=t===!0?--n:n,i.slideCount<1||0>n||n>i.slideCount-1?!1:(i.unload(),i.$slideTrack.children(this.options.slide).eq(n).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,i.reinit(),void 0)};t.prototype.setCSS=function(n){var r,u,t=this,i={};t.options.rtl===!0&&(n=-n);r="left"==t.positionProp?n+"px":"0px";u="top"==t.positionProp?n+"px":"0px";i[t.positionProp]=n;t.transformsEnabled===!1?t.$slideTrack.css(i):(i={},t.cssTransitions===!1?(i[t.animType]="translate("+r+", "+u+")",t.$slideTrack.css(i)):(i[t.animType]="translate3d("+r+", "+u+", 0px)",t.$slideTrack.css(i)))};t.prototype.setDimensions=function(){var n=this,t;n.options.vertical===!1?n.options.centerMode===!0&&n.$list.css({padding:"0px "+n.options.centerPadding}):(n.$list.height(n.$slides.first().outerHeight(!0)*n.options.slidesToShow),n.options.centerMode===!0&&n.$list.css({padding:n.options.centerPadding+" 0px"}));n.listWidth=n.$list.width();n.listHeight=n.$list.height();n.options.vertical===!1?(n.slideWidth=Math.ceil(n.listWidth/n.options.slidesToShow),n.$slideTrack.width(Math.ceil(n.slideWidth*n.$slideTrack.children(".slick-slide").length))):(n.slideWidth=Math.ceil(n.listWidth),n.$slideTrack.height(Math.ceil(n.$slides.first().outerHeight(!0)*n.$slideTrack.children(".slick-slide").length)));t=n.$slides.first().outerWidth(!0)-n.$slides.first().width();n.$slideTrack.children(".slick-slide").width(n.slideWidth-t)};t.prototype.setFade=function(){var i,t=this;t.$slides.each(function(r,u){i=-1*t.slideWidth*r;n(u).css({position:"relative",left:i,top:0,zIndex:800,opacity:0})});t.$slides.eq(t.currentSlide).css({zIndex:900,opacity:1})};t.prototype.setHeight=function(){var n=this,t;1===n.options.slidesToShow&&n.options.adaptiveHeight===!0&&n.options.vertical===!1&&(t=n.$slides.eq(n.currentSlide).outerHeight(!0),n.$list.css("height",t))};t.prototype.setPosition=function(){var n=this;n.setDimensions();n.setHeight();n.options.fade===!1?n.setCSS(n.getLeft(n.currentSlide)):n.setFade()};t.prototype.setProps=function(){var n=this,t=document.body.style;n.positionProp=n.options.vertical===!0?"top":"left";"top"===n.positionProp?n.$slider.addClass("slick-vertical"):n.$slider.removeClass("slick-vertical");(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&n.options.useCSS===!0&&(n.cssTransitions=!0);void 0!==t.OTransform&&(n.animType="OTransform",n.transformType="-o-transform",n.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(n.animType=!1));void 0!==t.MozTransform&&(n.animType="MozTransform",n.transformType="-moz-transform",n.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(n.animType=!1));void 0!==t.webkitTransform&&(n.animType="webkitTransform",n.transformType="-webkit-transform",n.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(n.animType=!1));void 0!==t.msTransform&&(n.animType="msTransform",n.transformType="-ms-transform",n.transitionType="msTransition",void 0===t.msTransform&&(n.animType=!1));void 0!==t.transform&&n.animType!==!1&&(n.animType="transform",n.transformType="transform",n.transitionType="transition");n.transformsEnabled=null!==n.animType&&n.animType!==!1};t.prototype.setSlideClasses=function(n){var u,i,r,f,t=this;t.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center");i=t.$slider.find(".slick-slide");t.options.centerMode===!0?(u=Math.floor(t.options.slidesToShow/2),t.options.infinite===!0&&(n>=u&&n<=t.slideCount-1-u?t.$slides.slice(n-u,n+u+1).addClass("slick-active"):(r=t.options.slidesToShow+n,i.slice(r-u+1,r+u+2).addClass("slick-active")),0===n?i.eq(i.length-1-t.options.slidesToShow).addClass("slick-center"):n===t.slideCount-1&&i.eq(t.options.slidesToShow).addClass("slick-center")),t.$slides.eq(n).addClass("slick-center")):n>=0&&n<=t.slideCount-t.options.slidesToShow?t.$slides.slice(n,n+t.options.slidesToShow).addClass("slick-active"):i.length<=t.options.slidesToShow?i.addClass("slick-active"):(f=t.slideCount%t.options.slidesToShow,r=t.options.infinite===!0?t.options.slidesToShow+n:n,t.options.slidesToShow==t.options.slidesToScroll&&t.slideCount-n<t.options.slidesToShow?i.slice(r-(t.options.slidesToShow-f),r+f).addClass("slick-active"):i.slice(r,r+t.options.slidesToShow).addClass("slick-active"));"ondemand"===t.options.lazyLoad&&t.lazyLoad()};t.prototype.setupInfinite=function(){var i,r,u,t=this;if((t.options.fade===!0||t.options.vertical===!0)&&(t.options.centerMode=!1),t.options.infinite===!0&&t.options.fade===!1&&(r=null,t.slideCount>t.options.slidesToShow)){for(u=t.options.centerMode===!0?t.options.slidesToShow+1:t.options.slidesToShow,i=t.slideCount;i>t.slideCount-u;i-=1)r=i-1,n(t.$slides[r]).clone(!0).attr("id","").attr("index",r-t.slideCount).prependTo(t.$slideTrack).addClass("slick-cloned");for(i=0;u>i;i+=1)r=i,n(t.$slides[r]).clone(!0).attr("id","").attr("index",r+t.slideCount).appendTo(t.$slideTrack).addClass("slick-cloned");t.$slideTrack.find(".slick-cloned").find("[id]").each(function(){n(this).attr("id","")})}};t.prototype.selectHandler=function(t){var i=this,r=null!=i.options.asNavFor?n(i.options.asNavFor).getSlick():null,u=parseInt(n(t.target).closest(".slick-slide").attr("index"));if(u||(u=0),!(i.slideCount<=i.options.slidesToShow)&&(i.slideHandler(u),null!=r)){if(r.slideCount<=r.options.slidesToShow)return;r.slideHandler(u)}};t.prototype.slideHandler=function(n){var i,r,u,f,e=null,t=this;return t.animating===!0&&t.options.waitForAnimate===!0?!1:(i=n,e=t.getLeft(i),u=t.getLeft(t.currentSlide),f=0!=t.slideCount%t.options.slidesToScroll?t.options.slidesToScroll:0,t.currentLeft=null===t.swipeLeft?u:t.swipeLeft,t.options.infinite===!1&&t.options.centerMode===!1&&(0>n||n>t.slideCount-t.options.slidesToShow+f)?(t.options.fade===!1&&(i=t.currentSlide,t.animateSlide(u,function(){t.postSlide(i)})),!1):t.options.infinite===!1&&t.options.centerMode===!0&&(0>n||n>t.slideCount-t.options.slidesToScroll)?(t.options.fade===!1&&(i=t.currentSlide,t.animateSlide(u,function(){t.postSlide(i)})),!1):(t.options.autoplay===!0&&clearInterval(t.autoPlayTimer),r=0>i?0!=t.slideCount%t.options.slidesToScroll?t.slideCount-t.slideCount%t.options.slidesToScroll:t.slideCount-t.options.slidesToScroll:i>t.slideCount-1?0:i,t.animating=!0,null!==t.options.onBeforeChange&&n!==t.currentSlide&&t.options.onBeforeChange.call(this,t,t.currentSlide,r),t.currentSlide=r,t.setSlideClasses(t.currentSlide),t.updateDots(),t.updateArrows(),t.options.fade===!0?(t.fadeSlide(r,function(){t.postSlide(r)}),!1):(t.animateSlide(e,function(){t.postSlide(r)}),void 0)))};t.prototype.startLoad=function(){var n=this;n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.hide(),n.$nextArrow.hide());n.options.dots===!0&&n.slideCount>n.options.slidesToShow&&n.$dots.hide();n.$slider.addClass("slick-loading")};t.prototype.swipeDirection=function(){var i,r,u,n,t=this;return i=t.touchObject.startX-t.touchObject.curX,r=t.touchObject.startY-t.touchObject.curY,u=Math.atan2(r,i),n=Math.round(180*u/Math.PI),0>n&&(n=360-Math.abs(n)),45>=n&&n>=0?"left":360>=n&&n>=315?"left":n>=135&&225>=n?"right":"vertical"};t.prototype.swipeEnd=function(t){var i=this,r=null!=i.options.asNavFor?n(i.options.asNavFor).getSlick():null;if(i.dragging=!1,void 0===i.touchObject.curX)return!1;if(i.touchObject.swipeLength>=i.touchObject.minSwipe)switch(n(t.target).on("click.slick",function(t){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();n(t.target).off("click.slick")}),i.swipeDirection()){case"left":i.slideHandler(i.currentSlide+i.options.slidesToScroll);null!=r&&r.slideHandler(r.currentSlide+r.options.slidesToScroll);i.touchObject={};break;case"right":i.slideHandler(i.currentSlide-i.options.slidesToScroll);null!=r&&r.slideHandler(r.currentSlide-r.options.slidesToScroll);i.touchObject={}}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),null!=r&&r.slideHandler(r.currentSlide),i.touchObject={})};t.prototype.swipeHandler=function(n){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==n.type.indexOf("mouse")))switch(t.touchObject.fingerCount=n.originalEvent&&void 0!==n.originalEvent.touches?n.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,n.data.action){case"start":t.swipeStart(n);break;case"move":t.swipeMove(n);break;case"end":t.swipeEnd(n)}};t.prototype.swipeMove=function(n){var r,f,u,i,t=this;return i=void 0!==n.originalEvent?n.originalEvent.touches:null,r=t.getLeft(t.currentSlide),!t.dragging||i&&1!==i.length?!1:(t.touchObject.curX=void 0!==i?i[0].pageX:n.clientX,t.touchObject.curY=void 0!==i?i[0].pageY:n.clientY,t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curX-t.touchObject.startX,2))),f=t.swipeDirection(),"vertical"!==f?(void 0!==n.originalEvent&&t.touchObject.swipeLength>4&&n.preventDefault(),u=t.touchObject.curX>t.touchObject.startX?1:-1,t.swipeLeft=t.options.vertical===!1?r+t.touchObject.swipeLength*u:r+t.touchObject.swipeLength*(t.$list.height()/t.listWidth)*u,t.options.fade===!0||t.options.touchMove===!1?!1:t.animating===!0?(t.swipeLeft=null,!1):(t.setCSS(t.swipeLeft),void 0)):void 0)};t.prototype.swipeStart=function(n){var i,t=this;return 1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==n.originalEvent&&void 0!==n.originalEvent.touches&&(i=n.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==i?i.pageX:n.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==i?i.pageY:n.clientY,t.dragging=!0,void 0)};t.prototype.unfilterSlides=function(){var n=this;null!==n.$slidesCache&&(n.unload(),n.$slideTrack.children(this.options.slide).detach(),n.$slidesCache.appendTo(n.$slideTrack),n.reinit())};t.prototype.unload=function(){var t=this;n(".slick-cloned",t.$slider).remove();t.$dots&&t.$dots.remove();t.$prevArrow&&(t.$prevArrow.remove(),t.$nextArrow.remove());t.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")};t.prototype.updateArrows=function(){var n=this;n.options.arrows===!0&&n.options.infinite!==!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.removeClass("slick-disabled"),n.$nextArrow.removeClass("slick-disabled"),0===n.currentSlide?(n.$prevArrow.addClass("slick-disabled"),n.$nextArrow.removeClass("slick-disabled")):n.currentSlide>=n.slideCount-n.options.slidesToShow&&(n.$nextArrow.addClass("slick-disabled"),n.$prevArrow.removeClass("slick-disabled")))};t.prototype.updateDots=function(){var n=this;null!==n.$dots&&(n.$dots.find("li").removeClass("slick-active"),n.$dots.find("li").eq(Math.floor(n.currentSlide/n.options.slidesToScroll)).addClass("slick-active"))};n.fn.slick=function(n){var i=this;return i.each(function(i,r){r.slick=new t(r,n)})};n.fn.slickAdd=function(n,t,i){var r=this;return r.each(function(r,u){u.slick.addSlide(n,t,i)})};n.fn.slickCurrentSlide=function(){var n=this;return n.get(0).slick.getCurrent()};n.fn.slickFilter=function(n){var t=this;return t.each(function(t,i){i.slick.filterSlides(n)})};n.fn.slickGoTo=function(n){var t=this;return t.each(function(t,i){i.slick.changeSlide({data:{message:"index",index:n}})})};n.fn.slickNext=function(){var n=this;return n.each(function(n,t){t.slick.changeSlide({data:{message:"next"}})})};n.fn.slickPause=function(){var n=this;return n.each(function(n,t){t.slick.autoPlayClear();t.slick.paused=!0})};n.fn.slickPlay=function(){var n=this;return n.each(function(n,t){t.slick.paused=!1;t.slick.autoPlay()})};n.fn.slickPrev=function(){var n=this;return n.each(function(n,t){t.slick.changeSlide({data:{message:"previous"}})})};n.fn.slickRemove=function(n,t){var i=this;return i.each(function(i,r){r.slick.removeSlide(n,t)})};n.fn.slickGetOption=function(n){var t=this;return t.get(0).slick.options[n]};n.fn.slickSetOption=function(n,t,i){var r=this;return r.each(function(r,u){u.slick.options[n]=t;i===!0&&(u.slick.unload(),u.slick.reinit())})};n.fn.slickUnfilter=function(){var n=this;return n.each(function(n,t){t.slick.unfilterSlides()})};n.fn.unslick=function(){var n=this;return n.each(function(n,t){t.slick&&t.slick.destroy()})};n.fn.getSlick=function(){var n=null,t=this;return t.each(function(t,i){n=i.slick}),n}}),function(n,t,i){(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.qtip&&n(jQuery)})(function(r){"use strict";function oi(n,t,i,f){this.id=i;this.target=n;this.tooltip=s;this.elements={target:n};this._id=o+"-"+i;this.timers={img:{}};this.options=t;this.plugins={};this.cache={event:{},target:r(),disabled:u,attr:f,onTooltip:u,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=u}function et(n){return n===s||r.type(n)!=="object"}function pi(n){return!(r.isFunction(n)||n&&n.attr||n.length||r.type(n)==="object"&&(n.jquery||n.then))}function dt(n){var t,e,i,o;return et(n)?u:(et(n.metadata)&&(n.metadata={type:n.metadata}),"content"in n&&(t=n.content,et(t)||t.jquery||t.done?t=n.content={text:e=pi(t)?u:t}:e=t.text,"ajax"in t&&(i=t.ajax,o=i&&i.once!==u,delete t.ajax,t.text=function(n,t){var u=e||r(this).attr(t.options.content.attr)||"Loading...",f=r.ajax(r.extend({},i,{context:t})).then(i.success,s,i.error).then(function(n){return n&&o&&t.set("content.text",n),n},function(n,i,r){t.destroyed||n.status===0||t.set("content.text",i+": "+r)});return o?u:(t.set("content.text",u),f)}),"title"in t&&(r.isPlainObject(t.title)&&(t.button=t.title.button,t.title=t.title.text),pi(t.title||u)&&(t.title=u))),"position"in n&&et(n.position)&&(n.position={my:n.position,at:n.position}),"show"in n&&et(n.show)&&(n.show=n.show.jquery?{target:n.show}:n.show===f?{ready:f}:{event:n.show}),"hide"in n&&et(n.hide)&&(n.hide=n.hide.jquery?{target:n.hide}:{event:n.hide}),"style"in n&&et(n.style)&&(n.style={classes:n.style}),r.each(h,function(){this.sanitize&&this.sanitize(n)}),n)}function wi(n,t){for(var u=0,f,i=n,r=t.split(".");i=i[r[u++]];)u<r.length&&(f=i);return[f||n,r.pop()]}function ar(n,t){var i,r,u;for(i in this.checks)for(r in this.checks[i])(u=new RegExp(r,"i").exec(n))&&(t.push(u),(i==="builtin"||this.plugins[i])&&this.checks[i][r].apply(this.plugins[i]||this,t))}function gt(n){return cr.concat("").join(n?"-"+n+" ":" ")}function ni(n,t){if(t>0)return setTimeout(r.proxy(n,this),t);n.call(this)}function vr(n){this.tooltip.hasClass(a)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=ni.call(this,function(){this.toggle(f,n)},this.options.show.delay))}function yr(n){if(!this.tooltip.hasClass(a)&&!this.destroyed){var t=r(n.relatedTarget),i=t.closest(rt)[0]===this.tooltip[0],f=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&this.options.position.target==="mouse"&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(n.type)&&(i||f)){try{n.preventDefault();n.stopImmediatePropagation()}catch(e){}return}this.timers.hide=ni.call(this,function(){this.toggle(u,n)},this.options.hide.delay,this)}}function si(n){!this.tooltip.hasClass(a)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=ni.call(this,function(){this.hide(n)},this.options.hide.inactive))}function di(n){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(n)}function gi(n,i,u){r(t.body).delegate(n,(i.split?i:i.join("."+o+" "))+"."+o,function(){var n=c.api[r.attr(this,bt)];n&&!n.disabled&&u.apply(n,arguments)})}function pr(n,i,e){var y,l,v,h,b,k=r(t.body),p=n[0]===t?k:n,w=n.metadata?n.metadata(e.metadata):s,d=e.metadata.type==="html5"&&w?w[e.metadata.name]:s,a=n.data(e.metadata.name||"qtipopts");try{a=typeof a=="string"?r.parseJSON(a):a}catch(g){}if(h=r.extend(f,{},c.defaults,e,typeof a=="object"?dt(a):s,dt(d||w)),l=h.position,h.id=i,"boolean"==typeof h.content.text)if(v=n.attr(h.content.attr),h.content.attr!==u&&v)h.content.text=v;else return u;if(l.container.length||(l.container=k),l.target===u&&(l.target=p),h.show.target===u&&(h.show.target=p),h.show.solo===f&&(h.show.solo=l.container.closest("body")),h.hide.target===u&&(h.hide.target=p),h.position.viewport===f&&(h.position.viewport=l.container),l.container=l.container.eq(0),l.at=new it(l.at,f),l.my=new it(l.my),n.data(o))if(h.overwrite)n.qtip("destroy",!0);else if(h.overwrite===u)return u;return n.attr(fi,i),h.suppress&&(b=n.attr("title"))&&n.removeAttr("title").attr(ut,b).attr("title",""),y=new oi(n,h,i,!!v),n.data(o,y),y}function pt(n){return n.charAt(0).toUpperCase()+n.slice(1)}function wr(n,t){var u=t.charAt(0).toUpperCase()+t.slice(1),e=(t+" "+rr.join(u+" ")+u).split(" "),r,f,o=0;if(ri[t])return n.css(ri[t]);while(r=e[o++])if((f=n.css(r))!==i)return ri[t]=r,f}function ct(n,t){return Math.ceil(parseFloat(wr(n,t)))}function ur(n,t){this._ns="tip";this.options=t;this.offset=t.offset;this.size=[t.width,t.height];this.init(this.qtip=n)}function fr(n,t){this.options=t;this._ns="-modal";this.init(this.qtip=n)}function sr(n){this._ns="ie6";this.init(this.qtip=n)}var f=!0,u=!1,s=null,w="x",y="y",d="width",at="height",b="top",p="left",tt="bottom",k="right",l="center",hr="flipinvert",ft="shift",c,e,it,wt,h={},o="qtip",fi="data-hasqtip",bt="data-qtip-id",cr=["ui-widget","ui-tooltip"],rt="."+o,vi="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),yi=o+"-fixed",ei=o+"-default",ot=o+"-focus",lr=o+"-hover",a=o+"-disabled",st="_replacedByqTip",ut="oldtitle",kt,v={ie:function(){for(var n=4,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+n+"]><i><\/i><![endif]-->")&&i.getElementsByTagName("i")[0];n+=1);return n>4?n:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||u},bi,ki,vt,ri,rr,li,ai,g,ui,nt,er,or;e=oi.prototype;e._when=function(n){return r.when.apply(r,n)};e.render=function(n){if(this.rendered||this.destroyed)return this;var i=this,t=this.options,s=this.cache,y=this.elements,p=t.content.text,l=t.content.title,w=t.content.button,e=t.position,k="."+this._id+" ",v=[],b;return r.attr(this.target[0],"aria-describedby",this._id),s.posClass=this._createPosClass((this.position={my:e.my,at:e.at}).my),this.tooltip=y.tooltip=b=r("<div/>",{id:this._id,"class":[o,ei,t.style.classes,s.posClass].join(" "),width:t.style.width||"",height:t.style.height||"",tracking:e.target==="mouse"&&e.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":u,"aria-describedby":this._id+"-content","aria-hidden":f}).toggleClass(a,this.disabled).attr(bt,this.id).data(o,this).appendTo(e.container).append(y.content=r("<div />",{"class":o+"-content",id:this._id+"-content","aria-atomic":f})),this.rendered=-1,this.positioning=f,l&&(this._createTitle(),r.isFunction(l)||v.push(this._updateTitle(l,u))),w&&this._createButton(),r.isFunction(p)||v.push(this._updateContent(p,u)),this.rendered=f,this._setWidget(),r.each(h,function(n){var t;this.initialize==="render"&&(t=this(i))&&(i.plugins[n]=t)}),this._unassignEvents(),this._assignEvents(),this._when(v).then(function(){i._trigger("render");i.positioning=u;!i.hiddenDuringWait&&(t.show.ready||n)&&i.toggle(f,s.event,u);i.hiddenDuringWait=u}),c.api[this.id]=this,this};e.destroy=function(n){function t(){if(!this.destroyed){this.destroyed=f;var n=this.target,t=n.attr(ut),i;this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove();r.each(this.plugins,function(){this.destroy&&this.destroy()});for(i in this.timers)clearTimeout(this.timers[i]);n.removeData(o).removeAttr(bt).removeAttr(fi).removeAttr("aria-describedby");this.options.suppress&&t&&n.attr("title",t).removeAttr(ut);this._unassignEvents();this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=s;delete c.api[this.id]}}if(this.destroyed)return this.target;if((n!==f||this.triggering==="hide")&&this.rendered){this.tooltip.one("tooltiphidden",r.proxy(t,this));this.triggering||this.hide()}else t.call(this);return this.target};wt=e.checks={builtin:{"^id$":function(n,t,i,e){var s=i===f?c.nextid:i,h=o+"-"+s;s!==u&&s.length>0&&!r("#"+h).length?(this._id=h,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):n[t]=e},"^prerender":function(n,t,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(n,t,i){this._updateContent(i)},"^content.attr$":function(n,t,i,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(i))},"^content.title$":function(n,t,i){if(!i)return this._removeTitle();i&&!this.elements.title&&this._createTitle();this._updateTitle(i)},"^content.button$":function(n,t,i){this._updateButton(i)},"^content.title.(text|button)$":function(n,t,i){this.set("content."+t,i)},"^position.(my|at)$":function(n,t,i){"string"==typeof i&&(this.position[t]=n[t]=new it(i,t==="at"))},"^position.container$":function(n,t,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(n,t,i){i&&(!this.rendered&&this.render(f)||this.toggle(f))},"^style.classes$":function(n,t,i,r){this.rendered&&this.tooltip.removeClass(r).addClass(i)},"^style.(width|height)":function(n,t,i){this.rendered&&this.tooltip.css(t,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(n,t,i){this.rendered&&this.tooltip.toggleClass(ei,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(n,t,i){this.rendered&&this.tooltip[(r.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var n=this.options.position;this.tooltip.attr("tracking",n.target==="mouse"&&n.adjust.mouse);this._unassignEvents();this._assignEvents()}}}};e.get=function(n){if(this.destroyed)return this;var i=wi(this.options,n.toLowerCase()),t=i[0][i[1]];return t.precedance?t.string():t};bi=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i;ki=/^prerender|show\.ready/i;e.set=function(n,t){if(this.destroyed)return this;var h=this.rendered,i=u,e=this.options,c=this.checks,o;return"string"==typeof n?(o=n,n={},n[o]=t):n=r.extend({},n),r.each(n,function(t,u){if(h&&ki.test(t)){delete n[t];return}var f=wi(e,t.toLowerCase()),o;o=f[0][f[1]];f[0][f[1]]=u&&u.nodeType?r(u):u;i=bi.test(t)||i;n[t]=[f[0],f[1],u,o]}),dt(e),this.positioning=f,r.each(n,r.proxy(ar,this)),this.positioning=u,this.rendered&&this.tooltip[0].offsetWidth>0&&i&&this.reposition(e.position.target==="mouse"?s:this.cache.event),this};e._update=function(n,t){var i=this,e=this.cache;return!this.rendered||!n?u:(r.isFunction(n)&&(n=n.call(this.elements.target,e.event,this)||""),r.isFunction(n.then))?(e.waiting=f,n.then(function(n){return e.waiting=u,i._update(n,t)},s,function(n){return i._update(n,t)})):n===u||!n&&n!==""?u:(n.jquery&&n.length>0?t.empty().append(n.css({display:"block",visibility:"visible"})):t.html(n),this._waitForContent(t).then(function(n){i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(e.event,!n.length)}))};e._waitForContent=function(n){var t=this.cache;return t.waiting=f,(r.fn.imagesLoaded?n.imagesLoaded():r.Deferred().resolve([])).done(function(){t.waiting=u}).promise()};e._updateContent=function(n,t){this._update(n,this.elements.content,t)};e._updateTitle=function(n,t){this._update(n,this.elements.title,t)===u&&this._removeTitle(u)};e._createTitle=function(){var n=this.elements,t=this._id+"-title";n.titlebar&&this._removeTitle();n.titlebar=r("<div />",{"class":o+"-titlebar "+(this.options.style.widget?gt("header"):"")}).append(n.title=r("<div />",{id:t,"class":o+"-title","aria-atomic":f})).insertBefore(n.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(n){r(this).toggleClass("ui-state-active ui-state-focus",n.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(n){r(this).toggleClass("ui-state-hover",n.type==="mouseover")});this.options.content.button&&this._createButton()};e._removeTitle=function(n){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=s,n!==u&&this.reposition())};e._createPosClass=function(n){return o+"-pos-"+(n||this.options.position.my).abbrev()};e.reposition=function(i,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=f;var c=this.cache,d=this.tooltip,a=this.options.position,o=a.target,et=a.my,g=a.at,ot=a.viewport,ht=a.container,ut=a.adjust,at=ut.method.split(" "),ct=d.outerWidth(u),lt=d.outerHeight(u),nt=0,it=0,vt=d.css("position"),s={left:0,top:0},wt=d[0].offsetWidth>0,bt=i&&i.type==="scroll",st=r(n),yt=ht[0].ownerDocument,rt=this.mouse,y,w,ft,pt;if(r.isArray(o)&&o.length===2)g={x:p,y:b},s={left:o[0],top:o[1]};else if(o==="mouse")g={x:p,y:b},(!ut.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&(i.type==="resize"||i.type==="scroll")?i=c.event:rt&&rt.pageX&&(i=rt),vt!=="static"&&(s=ht.offset()),yt.body.offsetWidth!==(n.innerWidth||yt.documentElement.clientWidth)&&(w=r(t.body).offset()),s={left:i.pageX-s.left+(w&&w.left||0),top:i.pageY-s.top+(w&&w.top||0)},ut.mouse&&bt&&rt&&(s.left-=(rt.scrollX||0)-st.scrollLeft(),s.top-=(rt.scrollY||0)-st.scrollTop());else{if(o==="event"?i&&i.target&&i.type!=="scroll"&&i.type!=="resize"?c.target=r(i.target):i.target||(c.target=this.elements.target):o!=="event"&&(c.target=r(o.jquery?o:this.elements.target)),o=c.target,o=r(o).eq(0),o.length===0)return this;o[0]===t||o[0]===n?(nt=v.iOS?n.innerWidth:o.width(),it=v.iOS?n.innerHeight:o.height(),o[0]===n&&(s={top:(ot||o).scrollTop(),left:(ot||o).scrollLeft()})):h.imagemap&&o.is("area")?y=h.imagemap(this,o,g,h.viewport?at:u):h.svg&&o&&o[0].ownerSVGElement?y=h.svg(this,o,g,h.viewport?at:u):(nt=o.outerWidth(u),it=o.outerHeight(u),s=o.offset());y&&(nt=y.width,it=y.height,w=y.offset,s=y.position);s=this.reposition.offset(o,s,ht);(v.iOS>3.1&&v.iOS<4.1||v.iOS>=4.3&&v.iOS<4.33||!v.iOS&&vt==="fixed")&&(s.left-=st.scrollLeft(),s.top-=st.scrollTop());(!y||y&&y.adjustable!==u)&&(s.left+=g.x===k?nt:g.x===l?nt/2:0,s.top+=g.y===tt?it:g.y===l?it/2:0)}return(s.left+=ut.x+(et.x===k?-ct:et.x===l?-ct/2:0),s.top+=ut.y+(et.y===tt?-lt:et.y===l?-lt/2:0),h.viewport?(ft=s.adjusted=h.viewport(this,s,a,nt,it,ct,lt),w&&ft.left&&(s.left+=w.left),w&&ft.top&&(s.top+=w.top),ft.my&&(this.position.my=ft.my)):s.adjusted={left:0,top:0},c.posClass!==(pt=this._createPosClass(this.position.my))&&d.removeClass(c.posClass).addClass(c.posClass=pt),!this._trigger("move",[s,ot.elem||ot],i))?this:(delete s.adjusted,e===u||!wt||isNaN(s.left)||isNaN(s.top)||o==="mouse"||!r.isFunction(a.effect)?d.css(s):r.isFunction(a.effect)&&(a.effect.call(d,this,r.extend({},s)),d.queue(function(n){r(this).css({opacity:"",height:""});v.ie&&this.style.removeAttribute("filter");n()})),this.positioning=u,this)};e.reposition.offset=function(n,i,u){function l(n,t){i.left+=t*n.scrollLeft();i.top+=t*n.scrollTop()}if(!u[0])return i;var s=r(n[0].ownerDocument),a=!!v.ie&&t.compatMode!=="CSS1Compat",f=u[0],o,h,e,c;do(h=r.css(f,"position"))!=="static"&&(h==="fixed"?(e=f.getBoundingClientRect(),l(s,-1)):(e=r(f).position(),e.left+=parseFloat(r.css(f,"borderLeftWidth"))||0,e.top+=parseFloat(r.css(f,"borderTopWidth"))||0),i.left-=e.left+(parseFloat(r.css(f,"marginLeft"))||0),i.top-=e.top+(parseFloat(r.css(f,"marginTop"))||0),o||(c=r.css(f,"overflow"))==="hidden"||c==="visible"||(o=r(f)));while(f=f.offsetParent);return o&&(o[0]!==s[0]||a)&&l(o,1),i};vt=(it=e.reposition.Corner=function(n,t){n=(""+n).replace(/([A-Z])/," $1").replace(/middle/gi,l).toLowerCase();this.x=(n.match(/left|right/i)||n.match(/center/)||["inherit"])[0].toLowerCase();this.y=(n.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!t;var i=n.charAt(0);this.precedance=i==="t"||i==="b"?y:w}).prototype;vt.invert=function(n,t){this[n]=this[n]===p?k:this[n]===k?p:t||this[n]};vt.string=function(n){var t=this.x,i=this.y,r=t!==i?t==="center"||i!=="center"&&(this.precedance===y||this.forceY)?[i,t]:[t,i]:[t];return n!==!1?r.join(" "):r};vt.abbrev=function(){var n=this.string(!1);return n[0].charAt(0)+(n[1]&&n[1].charAt(0)||"")};vt.clone=function(){return new it(this.string(),this.forceY)};e.toggle=function(n,i){var c=this.cache,b=this.options,e=this.tooltip;if(i){if(/over|enter/.test(i.type)&&c.event&&/out|leave/.test(c.event.type)&&b.show.target.add(i.target).length===b.show.target.length&&e.has(i.relatedTarget).length)return this;c.event=r.event.fix(i)}if(this.waiting&&!n&&(this.hiddenDuringWait=f),this.rendered){if(this.destroyed||this.disabled)return this}else return n?this.render(1):this;var y=n?"show":"hide",h=this.options[y],it=this.options[n?"hide":"show"],k=this.options.position,l=this.options.content,d=this.tooltip.css("width"),g=this.tooltip.is(":visible"),nt=n||h.target.length===1,tt=!i||h.target.length<2||c.target[0]===i.target,p,w,a;return((typeof n).search("boolean|number")&&(n=!g),p=!e.is(":animated")&&g===n&&tt,w=p?s:!!this._trigger(y,[90]),this.destroyed)?this:(w!==u&&n&&this.focus(i),!w||p)?this:(r.attr(e[0],"aria-hidden",!!!n),n?(this.mouse&&(c.origin=r.event.fix(this.mouse)),r.isFunction(l.text)&&this._updateContent(l.text,u),r.isFunction(l.title)&&this._updateTitle(l.title,u),!kt&&k.target==="mouse"&&k.adjust.mouse&&(r(t).bind("mousemove."+o,this._storeMouse),kt=f),d||e.css("width",e.outerWidth(u)),this.reposition(i,arguments[2]),d||e.css("width",""),!h.solo||(typeof h.solo=="string"?r(h.solo):r(rt,h.solo)).not(e).not(h.target).qtip("hide",r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete c.origin,kt&&!r(rt+'[tracking="true"]:visible',h.solo).not(e).length&&(r(t).unbind("mousemove."+o),kt=u),this.blur(i)),a=r.proxy(function(){n?(v.ie&&e[0].style.removeAttribute("filter"),e.css("overflow",""),"string"==typeof h.autofocus&&r(this.options.show.autofocus,e).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):e.css({display:"",visibility:"",opacity:"",left:"",top:""});this._trigger(n?"visible":"hidden")},this),h.effect===u||nt===u?(e[y](),a()):r.isFunction(h.effect)?(e.stop(1,1),h.effect.call(e,this),e.queue("fx",function(n){a();n()})):e.fadeTo(90,n?1:0,a),n&&h.target.trigger("qtip-"+this.id+"-inactive"),this)};e.show=function(n){return this.toggle(f,n)};e.hide=function(n){return this.toggle(u,n)};e.focus=function(n){if(!this.rendered||this.destroyed)return this;var t=r(rt),i=this.tooltip,f=parseInt(i[0].style.zIndex,10),u=c.zindex+t.length;return i.hasClass(ot)||this._trigger("focus",[u],n)&&(f!==u&&(t.each(function(){this.style.zIndex>f&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+ot).qtip("blur",n)),i.addClass(ot)[0].style.zIndex=u),this};e.blur=function(n){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(ot),this._trigger("blur",[this.tooltip.css("zIndex")],n),this)};e.disable=function(n){return this.destroyed?this:(n==="toggle"?n=!(this.rendered?this.tooltip.hasClass(a):this.disabled):"boolean"!=typeof n&&(n=f),this.rendered&&this.tooltip.toggleClass(a,n).attr("aria-disabled",n),this.disabled=!!n,this)};e.enable=function(){return this.disable(u)};e._createButton=function(){var e=this,n=this.elements,i=n.tooltip,t=this.options.content.button,s=typeof t=="string",f=s?t:"Close tooltip";n.button&&n.button.remove();n.button=t.jquery?t:r("<a />",{"class":"qtip-close "+(this.options.style.widget?"":o+"-icon"),title:f,"aria-label":f}).prepend(r("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));n.button.appendTo(n.titlebar||i).attr("role","button").click(function(n){return i.hasClass(a)||e.hide(n),u})};e._updateButton=function(n){if(!this.rendered)return u;var t=this.elements.button;n?this._createButton():t.remove()};e._setWidget=function(){var t=this.options.style.widget,n=this.elements,i=n.tooltip,r=i.hasClass(a);i.removeClass(a);a=t?"ui-state-disabled":"qtip-disabled";i.toggleClass(a,r);i.toggleClass("ui-helper-reset "+gt(),t).toggleClass(ei,this.options.style.def&&!t);n.content&&n.content.toggleClass(gt("content"),t);n.titlebar&&n.titlebar.toggleClass(gt("header"),t);n.button&&n.button.toggleClass(o+"-icon",!t)};e._storeMouse=function(n){return(this.mouse=r.event.fix(n)).type="mousemove",this};e._bind=function(n,t,i,u,f){if(n&&i&&t.length){var e="."+this._id+(u?"-"+u:"");return r(n).bind((t.split?t:t.join(e+" "))+e,r.proxy(i,f||this)),this}};e._unbind=function(n,t){return n&&r(n).unbind("."+this._id+(t?"-"+t:"")),this};e._trigger=function(n,t,i){var f=r.Event("tooltip"+n);return f.originalEvent=i&&r.extend({},i)||this.cache.event||s,this.triggering=n,this.tooltip.trigger(f,[this].concat(t||[])),this.triggering=u,!f.isDefaultPrevented()};e._bindEvents=function(n,t,i,u,f,e){var o=i.filter(u).add(u.filter(i)),s=[];o.length&&(r.each(t,function(t,i){var u=r.inArray(i,n);u>-1&&s.push(n.splice(u,1)[0])}),s.length&&(this._bind(o,s,function(n){var t=this.rendered?this.tooltip[0].offsetWidth>0:!1;(t?e:f).call(this,n)}),i=i.not(o),u=u.not(o)));this._bind(i,n,f);this._bind(u,t,e)};e._assignInitialEvents=function(n){function o(n){if(this.disabled||this.destroyed)return u;this.cache.event=n&&r.event.fix(n);this.cache.target=n&&r(n.target);clearTimeout(this.timers.show);this.timers.show=ni.call(this,function(){this.render(typeof n=="object"||t.show.ready)},t.prerender?0:t.show.delay)}var t=this.options,i=t.show.target,s=t.hide.target,h=t.show.event?r.trim(""+t.show.event).split(" "):[],e=t.hide.event?r.trim(""+t.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy");/mouse(over|enter)/i.test(t.show.event)&&!/mouse(out|leave)/i.test(t.hide.event)&&e.push("mouseleave");this._bind(i,"mousemove",function(n){this._storeMouse(n);this.cache.onTarget=f});this._bindEvents(h,e,i,s,o,function(){if(!this.timers)return u;clearTimeout(this.timers.show)});(t.show.ready||t.prerender)&&o.call(this,n)};e._assignEvents=function(){var y=this,i=this.options,f=i.position,e=this.tooltip,s=i.show.target,o=i.hide.target,p=f.container,h=f.viewport,l=r(t),k=r(t.body),v=r(n),w=i.show.event?r.trim(""+i.show.event).split(" "):[],b=i.hide.event?r.trim(""+i.hide.event).split(" "):[];r.each(i.events,function(n,t){y._bind(e,n==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+n],t,null,e)});/mouse(out|leave)/i.test(i.hide.event)&&i.hide.leave==="window"&&this._bind(l,["mouseout","blur"],function(n){/select|option/.test(n.target.nodeName)||n.relatedTarget||this.hide(n)});i.hide.fixed?o=o.add(e.addClass(yi)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(o,"mouseleave",function(){clearTimeout(this.timers.show)});(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(p.closest("html"),["mousedown","touchstart"],function(n){var t=r(n.target),i=this.rendered&&!this.tooltip.hasClass(a)&&this.tooltip[0].offsetWidth>0,u=t.parents(rt).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||u||this.target.has(t[0]).length||!i||this.hide(n)});"number"==typeof i.hide.inactive&&(this._bind(s,"qtip-"+this.id+"-inactive",si,"inactive"),this._bind(o.add(e),c.inactiveEvents,si));this._bindEvents(w,b,s,o,vr,yr);this._bind(s.add(e),"mousemove",function(n){if("number"==typeof i.hide.distance){var t=this.cache.origin||{},r=this.options.hide.distance,u=Math.abs;(u(n.pageX-t.pageX)>=r||u(n.pageY-t.pageY)>=r)&&this.hide(n)}this._storeMouse(n)});f.target==="mouse"&&f.adjust.mouse&&(i.hide.event&&this._bind(s,["mouseenter","mouseleave"],function(n){if(!this.cache)return u;this.cache.onTarget=n.type==="mouseenter"}),this._bind(l,"mousemove",function(n){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(a)&&this.tooltip[0].offsetWidth>0&&this.reposition(n)}));(f.adjust.resize||h.length)&&this._bind(r.event.special.resize?h:v,"resize",di);f.adjust.scroll&&this._bind(v.add(f.container),"scroll",di)};e._unassignEvents=function(){var u=this.options,f=u.show.target,e=u.hide.target,i=r.grep([this.elements.target[0],this.rendered&&this.tooltip[0],u.position.container[0],u.position.viewport[0],u.position.container.closest("html")[0],n,t],function(n){return typeof n=="object"});f&&f.toArray&&(i=i.concat(f.toArray()));e&&e.toArray&&(i=i.concat(e.toArray()));this._unbind(i)._unbind(i,"destroy")._unbind(i,"inactive")};r(function(){gi(rt,["mouseenter","mouseleave"],function(n){var u=n.type==="mouseenter",i=r(n.currentTarget),f=r(n.relatedTarget||n.target),t=this.options;u?(this.focus(n),i.hasClass(yi)&&!i.hasClass(a)&&clearTimeout(this.timers.hide)):t.position.target==="mouse"&&t.position.adjust.mouse&&t.hide.event&&t.show.target&&!f.closest(t.show.target[0]).length&&this.hide(n);i.toggleClass(lr,u)});gi("["+bt+"]",vi,si)});c=r.fn.qtip=function(n,t,e){var a=(""+n).toLowerCase(),y=s,p=r.makeArray(arguments).slice(1),v=p[p.length-1],l=this[0]?r.data(this[0],o):s;return!arguments.length&&l||a==="api"?l:"string"==typeof n?(this.each(function(){var n=r.data(this,o);if(!n)return f;if(v&&v.timeStamp&&(n.cache.event=v),t&&(a==="option"||a==="options"))if(e!==i||r.isPlainObject(t))n.set(t,e);else return y=n.get(t),u;else n[a]&&n[a].apply(n,p)}),y!==s?y:this):"object"==typeof n||!arguments.length?(l=dt(r.extend(f,{},n)),this.each(function(n){var i,t;if(t=r.isArray(l.id)?l.id[n]:l.id,t=!t||t===u||t.length<1||c.api[t]?c.nextid++:t,i=pr(r(this),t,l),i===u)return f;c.api[t]=i;r.each(h,function(){this.initialize==="initialize"&&this(i)});i._assignInitialEvents(v)})):void 0};r.qtip=oi;c.api={};r.each({attr:function(n,t){if(this.length){var u=this[0],f="title",i=r.data(u,"qtip");if(n===f&&i&&"object"==typeof i&&i.options.suppress)return arguments.length<2?r.attr(u,ut):(i&&i.options.content.attr===f&&i.cache.attr&&i.set("content.text",t),this.attr(ut,t))}return r.fn["attr"+st].apply(this,arguments)},clone:function(n){var i=r([]),t=r.fn["clone"+st].apply(this,arguments);return n||t.filter("["+ut+"]").attr("title",function(){return r.attr(this,ut)}).removeAttr(ut),t}},function(n,t){if(!t||r.fn[n+st])return f;var i=r.fn[n+st]=r.fn[n];r.fn[n]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}});r.ui||(r["cleanData"+st]=r.cleanData,r.cleanData=function(n){for(var i=0,t;(t=r(n[i])).length;i++)if(t.attr(fi))try{t.triggerHandler("removeqtip")}catch(u){}r["cleanData"+st].apply(this,arguments)});c.version="2.2.1";c.nextid=0;c.inactiveEvents=vi;c.zindex=15e3;c.defaults={prerender:u,id:u,overwrite:f,suppress:f,content:{text:f,attr:"title",title:u,button:u},position:{my:"top left",at:"bottom right",target:u,container:u,viewport:u,adjust:{x:0,y:0,mouse:f,scroll:f,resize:f,method:"flipinvert flipinvert"},effect:function(n,t){r(this).animate(t,{duration:200,queue:u})}},show:{target:u,event:"mouseenter",effect:f,delay:90,solo:u,ready:u,autofocus:u},hide:{target:u,event:"mouseleave",effect:f,delay:0,fixed:u,inactive:u,leave:"window",distance:u},style:{classes:"",widget:u,width:u,height:u,def:f},events:{render:s,move:s,show:s,hide:s,toggle:s,visible:s,hidden:s,focus:s,blur:s}};var hi,ci="margin",ti="border",yt="color",ht="background-color",nr="transparent",tr=" !important",ii=!!t.createElement("canvas").getContext,ir=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;if(ri={},rr=["Webkit","O","Moz","ms"],ii)var br=n.devicePixelRatio||1,kr=function(){var n=t.createElement("canvas").getContext("2d");return n.backingStorePixelRatio||n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||1}(),lt=br/kr;else li=function(n,t,i){return"<qtipvml:"+n+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};r.extend(ur.prototype,{init:function(n){var t,i;i=this.element=n.elements.tip=r("<div />",{"class":o+"-tip"}).prependTo(n.tooltip);ii?(t=r("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=li("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),n._bind(r("*",i).add(i),["click","mousedown"],function(n){n.stopPropagation()},this._ns));n._bind(n.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(n){var t=this.qtip.elements.titlebar;return t&&(n.y===b||n.y===l&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(f))},_parseCorner:function(n){var t=this.qtip.options.position.my;return n===u||t===u?n=u:n===f?n=new it(t.string()):n.string||(n=new it(n),n.fixed=f),n},_parseWidth:function(n,t,i){var r=this.qtip.elements,u=ti+pt(t)+"Width";return(i?ct(i,u):ct(r.content,u)||ct(this._useTitle(n)&&r.titlebar||r.content,u)||ct(r.tooltip,u))||0},_parseRadius:function(n){var t=this.qtip.elements,i=ti+pt(n.y)+pt(n.x)+"Radius";return v.ie<9?0:ct(this._useTitle(n)&&t.titlebar||t.content,i)||ct(t.tooltip,i)||0},_invalidColour:function(n,t,i){var r=n.css(t);return!r||i&&r===n.css(i)||ir.test(r)?u:r},_parseColours:function(n){var i=this.qtip.elements,u=this.element.css("cssText",""),f=ti+pt(n[n.precedance])+pt(yt),o=this._useTitle(n)&&i.titlebar||i.content,t=this._invalidColour,e=[];return e[0]=t(u,ht)||t(o,ht)||t(i.content,ht)||t(i.tooltip,ht)||u.css(ht),e[1]=t(u,f,yt)||t(o,f,yt)||t(i.content,f,yt)||t(i.tooltip,f,yt)||i.tooltip.css(f),r("*",u).add(u).css("cssText",ht+":"+nr+tr+";"+ti+":0"+tr+";"),e},_calculateSize:function(n){var o=n.precedance===y,s=this.options.width,r=this.options.height,h=n.abbrev()==="c",c=(o?s:r)*(h?.5:1),i=Math.pow,l=Math.round,a,f,e,u=Math.sqrt(i(c,2)+i(r,2)),t=[this.border/c*u,this.border/r*u];return t[2]=Math.sqrt(i(t[0],2)-i(this.border,2)),t[3]=Math.sqrt(i(t[1],2)-i(this.border,2)),a=u+t[2]+t[3]+(h?0:t[0]),f=a/u,e=[l(f*s),l(f*r)],o?e:e.reverse()},_calculateTip:function(n,t,i){i=i||1;t=t||this.size;var r=t[0]*i,u=t[1]*i,e=Math.ceil(r/2),o=Math.ceil(u/2),f={br:[0,0,r,u,r,0],bl:[0,0,r,0,0,u],tr:[0,u,r,0,r,u],tl:[0,0,0,u,r,u],tc:[0,u,e,0,r,u],bc:[0,0,r,0,e,u],rc:[0,0,r,o,0,u],lc:[r,0,r,u,0,o]};return f.lt=f.br,f.rt=f.bl,f.lb=f.tr,f.rb=f.tl,f[n.abbrev()]},_drawCoords:function(n,t){n.beginPath();n.moveTo(t[0],t[1]);n.lineTo(t[2],t[3]);n.lineTo(t[4],t[5]);n.closePath()},create:function(){var n=this.corner=(ii||v.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&this.corner.abbrev()!=="c")&&(this.qtip.cache.corner=n.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,i){if(!this.enabled)return this;var ht=this.qtip.elements,ot=this.element,rt=ot.children(),ut=this.options,nt=this.size,e=ut.mimic,ft=Math.round,a,et,h,c,st,g,o,s;t||(t=this.qtip.cache.corner||this.corner);e===u?e=t:(e=new it(e),e.precedance=t.precedance,e.x==="inherit"?e.x=t.x:e.y==="inherit"?e.y=t.y:e.x===e.y&&(e[t.precedance]=t[t.precedance]));et=e.precedance;t.precedance===w?this._swapDimensions():this._resetDimensions();a=this.color=this._parseColours(t);a[1]!==nr?(s=this.border=this._parseWidth(t,t[t.precedance]),ut.border&&s<1&&!ir.test(a[1])&&(a[0]=a[1]),this.border=s=ut.border!==f?ut.border:s):this.border=s=0;o=this.size=this._calculateSize(t);ot.css({width:o[0],height:o[1],lineHeight:o[1]+"px"});g=t.precedance===y?[ft(e.x===p?s:e.x===k?o[0]-nt[0]-s:(o[0]-nt[0])/2),ft(e.y===b?o[1]-nt[1]:0)]:[ft(e.x===p?o[0]-nt[0]:0),ft(e.y===b?s:e.y===tt?o[1]-nt[1]-s:(o[1]-nt[1])/2)];ii?(h=rt[0].getContext("2d"),h.restore(),h.save(),h.clearRect(0,0,6e3,6e3),c=this._calculateTip(e,nt,lt),st=this._calculateTip(e,this.size,lt),rt.attr(d,o[0]*lt).attr(at,o[1]*lt),rt.css(d,o[0]).css(at,o[1]),this._drawCoords(h,st),h.fillStyle=a[1],h.fill(),h.translate(g[0]*lt,g[1]*lt),this._drawCoords(h,c),h.fillStyle=a[0],h.fill()):(c=this._calculateTip(e),c="m"+c[0]+","+c[1]+" l"+c[2]+","+c[3]+" "+c[4]+","+c[5]+" xe",g[2]=s&&/^(r|b)/i.test(t.string())?v.ie===8?2:1:0,rt.css({coordsize:o[0]+s+" "+(o[1]+s),antialias:""+(e.string().indexOf(l)>-1),left:g[0]-g[2]*Number(et===w),top:g[1]-g[2]*Number(et===y),width:o[0]+s,height:o[1]+s}).each(function(n){var t=r(this);t[t.prop?"prop":"attr"]({coordsize:o[0]+s+" "+(o[1]+s),path:c,fillcolor:a[0],filled:!!n,stroked:!n}).toggle(!!(s||n));n||t.html(li("stroke",'weight="'+s*2+'px" color="'+a[1]+'" miterlimit="1000" joinstyle="miter"'))}));n.opera&&setTimeout(function(){ht.tip.css({display:"inline-block",visibility:"visible"})},1);i!==u&&this.calculate(t,o)},calculate:function(n,t){if(!this.enabled)return u;var e=this,o=this.qtip.elements,c=this.element,h=this.options.offset,a=o.tooltip.hasClass("ui-widget"),i={},f,s;return n=n||this.corner,f=n.precedance,t=t||this._calculateSize(n),s=[n.x,n.y],f===w&&s.reverse(),r.each(s,function(r,u){var s,a,c;u===l?(s=f===y?p:b,i[s]="50%",i[ci+"-"+s]=-Math.round(t[f===y?0:1]/2)+h):(s=e._parseWidth(n,u,o.tooltip),a=e._parseWidth(n,u,o.content),c=e._parseRadius(n),i[u]=Math.max(-e.border,r?a:h+(c>s?c:-s)))}),i[n[f]]-=t[f===w?0:1],c.css({margin:"",top:"",bottom:"",left:"",right:""}).css(i),i},reposition:function(n,t,r){function it(n,t,i,r,u){n===ft&&s.precedance===t&&h[r]&&s[i]!==l?s.precedance=s.precedance===w?y:w:n!==ft&&h[r]&&(s[t]=s[t]===l?h[r]>0?r:u:s[t]===r?u:r)}function rt(n,t,f){s[n]===l?nt[ci+"-"+t]=o[n]=e[ci+"-"+t]-h[t]:(a=e[f]!==i?[h[t],-e[t]]:[-h[t],e[t]],(o[n]=Math.max(a[0],a[1]))>a[0]&&(r[t]-=h[t],o[t]=u),nt[e[f]!==i?f:t]=o[n])}if(this.enabled){var c=t.cache,s=this.corner.clone(),h=r.adjusted,v=t.options.position.adjust.method.split(" "),d=v[0],g=v[1]||v[0],o={left:u,top:u,x:0,y:0},e,nt={},a;this.corner.fixed!==f&&(it(d,w,y,p,k),it(g,y,w,b,tt),(s.string()!==c.corner.string()||c.cornerTop!==h.top||c.cornerLeft!==h.left)&&this.update(s,u));e=this.calculate(s);e.right!==i&&(e.left=-e.right);e.bottom!==i&&(e.top=-e.bottom);e.user=this.offset;(o.left=d===ft&&!!h.left)&&rt(w,p,k);(o.top=g===ft&&!!h.top)&&rt(y,b,tt);this.element.css(nt).toggle(!(o.x&&o.y||s.x===l&&o.y||s.y===l&&o.x));r.left-=e.left.charAt?e.user:d!==ft||o.top||!o.left&&!o.top?e.left+this.border:0;r.top-=e.top.charAt?e.user:g!==ft||o.left||!o.left&&!o.top?e.top+this.border:0;c.cornerLeft=h.left;c.cornerTop=h.top;c.corner=s.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}});hi=h.tip=function(n){return new ur(n,n.options.style.tip)};hi.initialize="render";hi.sanitize=function(n){if(n.style&&"tip"in n.style){var t=n.style.tip;typeof t!="object"&&(t=n.style.tip={corner:t});/string|boolean/i.test(typeof t.corner)||(t.corner=f)}};wt.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(n){this.size=[n.width,n.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};r.extend(f,c.defaults,{style:{tip:{corner:f,mimic:u,width:6,height:6,border:f,offset:0}}});ui="qtip-modal";nt="."+ui;g=function(){function a(n){if(r.expr[":"].focusable)return r.expr[":"].focusable;var e=!isNaN(r.attr(n,"tabindex")),t=n.nodeName&&n.nodeName.toLowerCase(),i,u,f;return"area"===t?(i=n.parentNode,u=i.name,!n.href||!u||i.nodeName.toLowerCase()!=="map")?!1:(f=r("img[usemap=#"+u+"]")[0],!!f&&f.is(":visible")):/input|select|textarea|button|object/.test(t)?!n.disabled:"a"===t?n.href||e:e}function c(n){o.length<1&&n.length?n.not("body").blur():o.first().focus()}function v(t){if(n.is(":visible")){var f=r(t.target),e=i.tooltip,s=f.closest(rt),h;h=s.length<1?u:parseInt(s[0].style.zIndex,10)>parseInt(e[0].style.zIndex,10);h||f.closest(rt)[0]===e[0]||c(f);l=t.target===o[o.length-1]}}var e=this,o={},i,l,h,n;r.extend(e,{init:function(){return n=e.elem=r("<div />",{id:"qtip-overlay",html:"<div><\/div>",mousedown:function(){return u}}).hide(),r(t.body).bind("focusin"+nt,v),r(t).bind("keydown"+nt,function(n){i&&i.options.show.modal.escape&&n.keyCode===27&&i.hide(n)}),n.bind("click"+nt,function(n){i&&i.options.show.modal.blur&&i.hide(n)}),e},update:function(n){i=n;o=n.options.show.modal.stealfocus!==u?n.tooltip.find("*").filter(function(){return a(this)}):[]},toggle:function(o,l,a){var d=r(t.body),p=o.tooltip,v=o.options.show.modal,y=v.effect,w=l?"show":"hide",b=n.is(":visible"),k=r(nt).filter(":visible:not(:animated)").not(p);return(e.update(o),l&&v.stealfocus!==u&&c(r(":focus")),n.toggleClass("blurs",v.blur),l&&n.appendTo(t.body),n.is(":animated")&&b===l&&h!==u||!l&&k.length)?e:(n.stop(f,u),r.isFunction(y)?y.call(n,l):y===u?n[w]():n.fadeTo(parseInt(a,10)||90,l?1:0,function(){l||n.hide()}),l||n.queue(function(t){n.css({left:"",top:""});r(nt).length||n.detach();t()}),h=l,i.destroyed&&(i=s),e)}});e.init()};g=new g;r.extend(fr.prototype,{init:function(n){var t=n.tooltip;if(!this.options.on)return this;n.elements.overlay=g.elem;t.addClass(ui).css("z-index",c.modal_zindex+r(nt).length);n._bind(t,["tooltipshow","tooltiphide"],function(n,i,u){var f=n.originalEvent;if(n.target===t[0])if(f&&n.type==="tooltiphide"&&/mouse(leave|enter)/.test(f.type)&&r(f.relatedTarget).closest(g.elem[0]).length)try{n.preventDefault()}catch(e){}else(!f||f&&f.type!=="tooltipsolo")&&this.toggle(n,n.type==="tooltipshow",u)},this._ns,this);n._bind(t,"tooltipfocus",function(n,i){if(!n.isDefaultPrevented()&&n.target===t[0]){var u=r(nt),f=c.modal_zindex+u.length,e=parseInt(t[0].style.zIndex,10);g.elem[0].style.zIndex=f-1;u.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)});u.filter("."+ot).qtip("blur",n.originalEvent);t.addClass(ot)[0].style.zIndex=f;g.update(i);try{n.preventDefault()}catch(o){}}},this._ns,this);n._bind(t,"tooltiphide",function(n){n.target===t[0]&&r(nt).filter(":visible").not(t).last().qtip("focus",n)},this._ns,this)},toggle:function(n,t,i){if(n&&n.isDefaultPrevented())return this;g.toggle(this.qtip,!!t,i)},destroy:function(){this.qtip.tooltip.removeClass(ui);this.qtip._unbind(this.qtip.tooltip,this._ns);g.toggle(this.qtip,u);delete this.qtip.elements.overlay}});ai=h.modal=function(n){return new fr(n,n.options.show.modal)};ai.sanitize=function(n){n.show&&(typeof n.show.modal!="object"?n.show.modal={on:!!n.show.modal}:typeof n.show.modal.on=="undefined"&&(n.show.modal.on=f))};c.modal_zindex=c.zindex-200;ai.initialize="render";wt.modal={"^show.modal.(on|blur)$":function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}};r.extend(f,c.defaults,{show:{modal:{on:u,effect:f,blur:f,stealfocus:f,escape:f}}});h.viewport=function(i,r,f,e,o,s,h){function wt(n,t,i,u,f,e,o,s,h){var y=r[f],c=a[n],k=kt[n],rt=i===ft,g=c===f?h:c===e?-h:-h/2,ut=k===f?s:k===e?-s:-s/2,tt=lt[f]+it[f]-(pt?0:nt[f]),b=tt-y,w=y+h-(o===d?ht:ct)-tt,p=g-(a.precedance===n||c===a[t]?ut:0)-(k===l?s/2:0);return rt?(p=(c===f?1:-1)*g,r[f]+=b>0?b:w>0?-w:0,r[f]=Math.max(-nt[f]+it[f],y-p,Math.min(Math.max(-nt[f]+it[f]+(o===d?ht:ct),y+p),r[f],c==="center"?y-g:1e9))):(u*=i===hr?2:0,b>0&&(c!==f||w>0)?(r[f]-=p+u,v.invert(n,f)):w>0&&(c!==e||b>0)&&(r[f]-=(c===l?-p:p)+u,v.invert(n,e)),r[f]<lt&&-r[f]>w&&(r[f]=y,v=a.clone())),r[f]-y}var vt=f.target,bt=i.elements.tooltip,a=f.my,kt=f.at,g=f.adjust,rt=g.method.split(" "),ut=rt[0],et=rt[1]||rt[0],c=f.viewport,yt=f.container,dt=i.cache,ot={left:0,top:0},st,v,nt,pt,ht,ct,lt,it;return!c.jquery||vt[0]===n||vt[0]===t.body||g.method==="none"?ot:(nt=yt.offset()||ot,pt=yt.css("position")==="static",st=bt.css("position")==="fixed",ht=c[0]===n?c.width():c.outerWidth(u),ct=c[0]===n?c.height():c.outerHeight(u),lt={left:st?0:c.scrollLeft(),top:st?0:c.scrollTop()},it=c.offset()||ot,(ut!=="shift"||et!=="shift")&&(v=a.clone()),{left:ut!=="none"?wt(w,y,ut,g.x,p,k,d,e,s):0,top:et!=="none"?wt(y,w,et,g.y,b,tt,at,o,h):0,my:v})};h.polys={polygon:function(n,t){for(var i={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:u},f=0,r,e=[],o=1,s=1,a=0,v=0,h,c,f=n.length;f--;)r=[parseInt(n[--f],10),parseInt(n[f+1],10)],r[0]>i.position.right&&(i.position.right=r[0]),r[0]<i.position.left&&(i.position.left=r[0]),r[1]>i.position.bottom&&(i.position.bottom=r[1]),r[1]<i.position.top&&(i.position.top=r[1]),e.push(r);if(h=i.width=Math.abs(i.position.right-i.position.left),c=i.height=Math.abs(i.position.bottom-i.position.top),t.abbrev()==="c")i.position={left:i.position.left+i.width/2,top:i.position.top+i.height/2};else{while(h>0&&c>0&&o>0&&s>0)for(h=Math.floor(h/2),c=Math.floor(c/2),t.x===p?o=h:t.x===k?o=i.width-h:o+=Math.floor(h/2),t.y===b?s=c:t.y===tt?s=i.height-c:s+=Math.floor(c/2),f=e.length;f--;){if(e.length<2)break;a=e[f][0]-i.position.left;v=e[f][1]-i.position.top;(t.x===p&&a>=o||t.x===k&&a<=o||t.x===l&&(a<o||a>i.width-o)||t.y===b&&v>=s||t.y===tt&&v<=s||t.y===l&&(v<s||v>i.height-s))&&e.splice(f,1)}i.position={left:e[0][0],top:e[0][1]}}return i},rect:function(n,t,i,r){return{width:Math.abs(i-n),height:Math.abs(r-t),position:{left:Math.min(n,i),top:Math.min(t,r)}}},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(n,t,i,r,f){var e=h.polys._angles[f.abbrev()],o=e===0?0:i*Math.cos(e*Math.PI),s=r*Math.sin(e*Math.PI);return{width:i*2-Math.abs(o),height:r*2-Math.abs(s),position:{left:n+o,top:t+s},adjustable:u}},circle:function(n,t,i,r){return h.polys.ellipse(n,t,i,i,r)}};h.svg=function(n,i,f){for(var g=r(t),e=i[0],a=r(e.ownerSVGElement),l=e.ownerDocument,b=(parseInt(i.css("stroke-width"),10)||0)/2,v,k,p,d,w,y,s,o,c;!e.getBBox;)e=e.parentNode;if(!e.getBBox||!e.parentNode)return u;switch(e.nodeName){case"ellipse":case"circle":o=h.polys.ellipse(e.cx.baseVal.value,e.cy.baseVal.value,(e.rx||e.r).baseVal.value+b,(e.ry||e.r).baseVal.value+b,f);break;case"line":case"polygon":case"polyline":for(s=e.points||[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}],o=[],y=-1,d=s.numberOfItems||s.length;++y<d;)w=s.getItem?s.getItem(y):s[y],o.push.apply(o,[w.x,w.y]);o=h.polys.polygon(o,f);break;default:o=e.getBBox();o={width:o.width,height:o.height,position:{left:o.x,top:o.y}}}return c=o.position,a=a[0],a.createSVGPoint&&(k=e.getScreenCTM(),s=a.createSVGPoint(),s.x=c.left,s.y=c.top,p=s.matrixTransform(k),c.left=p.x,c.top=p.y),l!==t&&n.position.target!=="mouse"&&(v=r((l.defaultView||l.parentWindow).frameElement).offset(),v&&(c.left+=v.left,c.top+=v.top)),l=r(l),c.left+=l.scrollLeft(),c.top+=l.scrollTop(),o};h.imagemap=function(n,t,i){t.jquery||(t=r(t));var s=(t.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),f=r('img[usemap="#'+t.parent("map").attr("name")+'"]'),y=r.trim(t.attr("coords")),c=y.replace(/,$/,"").split(","),e,l,a,o,v;if(!f.length)return u;if(s==="polygon")o=h.polys.polygon(c,i);else if(h.polys[s]){for(a=-1,v=c.length,l=[];++a<v;)l.push(parseInt(c[a],10));o=h.polys[s].apply(this,l.concat(i))}else return u;return e=f.offset(),e.left+=Math.ceil((f.outerWidth(u)-f.width())/2),e.top+=Math.ceil((f.outerHeight(u)-f.height())/2),o.position.left+=e.left,o.position.top+=e.top,o};or='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"><\/iframe>';r.extend(sr.prototype,{_scroll:function(){var t=this.qtip.elements.overlay;t&&(t[0].style.top=r(n).scrollTop()+"px")},init:function(i){var u=i.tooltip;r("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=r(or).appendTo(u),i._bind(u,"tooltipmove",this.adjustBGIFrame,this._ns,this));this.redrawContainer=r("<div/>",{id:o+"-rcontainer"}).appendTo(t.body);i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(n,["scroll","resize"],this._scroll,this._ns,this),i._bind(u,["tooltipshow"],this._scroll,this._ns,this));this.redraw()},adjustBGIFrame:function(){var t=this.qtip.tooltip,e={height:t.outerHeight(u),width:t.outerWidth(u)},r=this.qtip.plugins.tip,f=this.qtip.elements.tip,i,n;n=parseInt(t.css("borderLeftWidth"),10)||0;n={left:-n,top:-n};r&&f&&(i=r.corner.precedance==="x"?[d,p]:[at,b],n[i[1]]-=f[i[0]]());this.bgiframe.css(n).css(e)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var t=this.qtip.tooltip,u=this.qtip.options.style,e=this.qtip.options.position.container,f,n,i,r;return this.qtip.drawing=1,u.height&&t.css(at,u.height),u.width?t.css(d,u.width):(t.css(d,"").appendTo(this.redrawContainer),n=t.width(),n%2<1&&(n+=1),i=t.css("maxWidth")||"",r=t.css("minWidth")||"",f=(i+r).indexOf("%")>-1?e.width()/100:0,i=(i.indexOf("%")>-1?f:1)*parseInt(i,10)||n,r=(r.indexOf("%")>-1?f:1)*parseInt(r,10)||0,n=i+r?Math.min(Math.max(n,r),i):n,t.css(d,Math.round(n)).appendTo(e)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([n,this.qtip.tooltip],this._ns)}});er=h.ie6=function(n){return v.ie===6?new sr(n):u};er.initialize="render";wt.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(n){var u={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],i,t=n('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",!0)[0];t.style.lineHeight="99px";n(t).css("lineHeight")==="99px"&&r.push("lineHeight");t.style.lineHeight="";n.fn.autosize=function(f){return this.length?(f=n.extend({},u,f||{}),t.parentNode!==document.body&&n(document.body).append(t),this.each(function(){function v(){var i,r=window.getComputedStyle?window.getComputedStyle(e,null):!1;r?(i=e.getBoundingClientRect().width,(i===0||typeof i!="number")&&(i=parseInt(r.width,10)),n.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(n,t){i-=parseInt(r[t],10)})):i=Math.max(u.width(),0);t.style.width=i+"px"}function b(){var o={},h,c;i=e;t.className=f.className;t.id=f.id;s=parseInt(u.css("maxHeight"),10);n.each(r,function(n,t){o[t]=u.css(t)});n(t).css(o).attr("wrap",u.attr("wrap"));v();window.chrome&&(h=e.style.width,e.style.width="0px",c=e.offsetWidth,e.style.width=h)}function o(){var n,r;i!==e?b():v();t.value=!e.value&&f.placeholder?(u.attr("placeholder")||"")+f.append:e.value+f.append;t.style.overflowY=e.style.overflowY;r=parseInt(e.style.height,10);t.scrollTop=0;t.scrollTop=9e4;n=t.scrollTop;s&&n>s?(e.style.overflowY="scroll",n=s):(e.style.overflowY="hidden",n<h&&(n=h));n+=c;r!==n&&(e.style.height=n+"px",p&&f.callback.call(e,e))}function y(){clearTimeout(l);l=setTimeout(function(){var n=u.width();n!==a&&(a=n,o())},parseInt(f.resizeDelay,10))}var e=this,u=n(e),s,h,c=0,p=n.isFunction(f.callback),w={height:e.style.height,overflow:e.style.overflow,overflowY:e.style.overflowY,wordWrap:e.style.wordWrap,resize:e.style.resize},l,a=u.width();if(!u.data("autosize")){if(u.data("autosize",!0),(u.css("box-sizing")==="border-box"||u.css("-moz-box-sizing")==="border-box"||u.css("-webkit-box-sizing")==="border-box")&&(c=u.outerHeight()-u.height()),h=Math.max(parseInt(u.css("minHeight"),10)-c||0,u.height()),u.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:u.css("resize")==="none"||u.css("resize")==="vertical"?"none":"horizontal"}),"onpropertychange"in e)if("oninput"in e)u.on("input.autosize keyup.autosize",o);else u.on("propertychange.autosize",function(){event.propertyName==="value"&&o()});else u.on("input.autosize",o);if(f.resizeDelay!==!1)n(window).on("resize.autosize",y);u.on("autosize.resize",o);u.on("autosize.resizeIncludeStyle",function(){i=null;o()});u.on("autosize.destroy",function(){i=null;clearTimeout(l);n(window).off("resize",y);u.off("autosize").off(".autosize").css(w).removeData("autosize")});o()}})):this}}(window.jQuery||window.$),function(n){var t={init:function(i){return this.each(function(){var r,e,u,f;t.destroy.call(this);this.opt=n.extend(!0,{},n.fn.raty.defaults,i);r=n(this);e=["number","readOnly","score","scoreName"];t._callback.call(this,e);this.opt.precision&&t._adjustPrecision.call(this);this.opt.number=t._between(this.opt.number,0,this.opt.numberMax);this.opt.path=this.opt.path||"";this.opt.path&&this.opt.path.slice(this.opt.path.length-1,this.opt.path.length)!=="/"&&(this.opt.path+="/");this.stars=t._createStars.call(this);this.score=t._createScore.call(this);t._apply.call(this,this.opt.score);u=this.opt.space?4:0;f=this.opt.width||this.opt.number*this.opt.size+this.opt.number*u;this.opt.cancel&&(this.cancel=t._createCancel.call(this),f+=this.opt.size+u);this.opt.readOnly?t._lock.call(this):(r.css("cursor","pointer"),t._binds.call(this));this.opt.width!==!1&&r.css("width",f);t._target.call(this,this.opt.score);r.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score";this.opt.half=!0},_apply:function(n){n&&n>0&&(n=t._between(n,0,this.opt.number),this.score.val(n));t._fill.call(this,n);n&&t._roundStars.call(this,n)},_between:function(n,t,i){return Math.min(Math.max(parseFloat(n),t),i)},_binds:function(){this.cancel&&t._bindCancel.call(this);t._bindClick.call(this);t._bindOut.call(this);t._bindOver.call(this)},_bindCancel:function(){t._bindClickCancel.call(this);t._bindOutCancel.call(this);t._bindOverCancel.call(this)},_bindClick:function(){var t=this,i=n(t);t.stars.on("click.raty",function(n){t.score.val(t.opt.half||t.opt.precision?i.data("score"):this.alt);t.opt.click&&t.opt.click.call(t,parseFloat(t.score.val()),n)})},_bindClickCancel:function(){var n=this;n.cancel.on("click.raty",function(t){n.score.removeAttr("value");n.opt.click&&n.opt.click.call(n,null,t)})},_bindOut:function(){var i=this;n(this).on("mouseleave.raty",function(n){var r=parseFloat(i.score.val())||undefined;t._apply.call(i,r);t._target.call(i,r,n);i.opt.mouseout&&i.opt.mouseout.call(i,r,n)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(i){n(this).attr("src",t.opt.path+t.opt.cancelOff);t.opt.mouseout&&t.opt.mouseout.call(t,t.score.val()||null,i)})},_bindOverCancel:function(){var i=this;i.cancel.on("mouseover.raty",function(r){n(this).attr("src",i.opt.path+i.opt.cancelOn);i.stars.attr("src",i.opt.path+i.opt.starOff);t._target.call(i,null,r);i.opt.mouseover&&i.opt.mouseover.call(i,null)})},_bindOver:function(){var i=this,r=n(i),u=i.opt.half?"mousemove.raty":"mouseover.raty";i.stars.on(u,function(u){var f=parseInt(this.alt,10),e,o;i.opt.half?(e=parseFloat((u.pageX-n(this).offset().left)/i.opt.size),o=e>.5?1:.5,f=f-1+o,t._fill.call(i,f),i.opt.precision&&(f=f-o+e),t._roundStars.call(i,f),r.data("score",f)):t._fill.call(i,f);t._target.call(i,f,u);i.opt.mouseover&&i.opt.mouseover.call(i,f,u)})},_callback:function(n){for(i in n)typeof this.opt[n[i]]=="function"&&(this.opt[n[i]]=this.opt[n[i]].call(this))},_createCancel:function(){var i=n(this),r=this.opt.path+this.opt.cancelOff,t=n("<img />",{src:r,alt:"x",title:this.opt.cancelHint,"class":"raty-cancel"});return this.opt.cancelPlace=="left"?i.prepend("&#160;").prepend(t):i.append("&#160;").append(t),t},_createScore:function(){return n("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var f,r,u=n(this),i=1;i<=this.opt.number;i++)f=t._getHint.call(this,i),r=this.opt.score&&this.opt.score>=i?"starOn":"starOff",r=this.opt.path+this.opt[r],n("<img />",{src:r,alt:i,title:f}).appendTo(this),this.opt.space&&u.append(i<this.opt.number?"&#160;":"");return u.children("img")},_error:function(t){n(this).html(t);n.error(t)},_fill:function(n){for(var f,e,o,t=this,u=0,i=1;i<=t.stars.length;i++)if(f=t.stars.eq(i-1),e=t.opt.single?i==n:i<=n,t.opt.iconRange&&t.opt.iconRange.length>u){var r=t.opt.iconRange[u],s=r.on||t.opt.starOn,h=r.off||t.opt.starOff,o=e?s:h;i<=r.range&&f.attr("src",t.opt.path+o);i==r.range&&u++}else o=e?"starOn":"starOff",f.attr("src",this.opt.path+this.opt[o])},_getHint:function(n){var t=this.opt.hints[n-1];return t===""?"":t||n},_lock:function(){var i=parseInt(this.score.val(),10),r=i?t._getHint.call(this,i):this.opt.noRatedMsg;n(this).data("readonly",!0).css("cursor","").attr("title",r);this.score.attr("readonly","readonly");this.stars.attr("title",r);this.cancel&&this.cancel.hide()},_roundStars:function(n){var i=(n-Math.floor(n)).toFixed(2),t;i>this.opt.round.down&&(t="starOn",this.opt.halfShow&&i<this.opt.round.up?t="starHalf":i<this.opt.round.full&&(t="starOff"),this.stars.eq(Math.ceil(n)-1).attr("src",this.opt.path+this.opt[t]))},_target:function(i,r){var u,f;this.opt.target&&(u=n(this.opt.target),u.length===0&&t._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&t._error.call(this,'Template "{score}" missing!'),f=r&&r.type=="mouseover",i===undefined?i=this.opt.targetText:i===null?i=f?this.opt.cancelHint:this.opt.targetText:(this.opt.targetType=="hint"?i=t._getHint.call(this,Math.ceil(i)):this.opt.precision&&(i=parseFloat(i).toFixed(1)),f||this.opt.targetKeep||(i=this.opt.targetText)),i&&(i=this.opt.targetFormat.toString().replace("{score}",i)),u.is(":input")?u.val(i):u.html(i))},_unlock:function(){n(this).data("readonly",!1).css("cursor","pointer").removeAttr("title");this.score.removeAttr("readonly","readonly");for(var i=0;i<this.opt.number;i++)this.stars.eq(i).attr("title",t._getHint.call(this,i+1));this.cancel&&this.cancel.css("display","")},cancel:function(i){return this.each(function(){n(this).data("readonly")!==!0&&(t[i?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(i){return n(this).each(function(){n(this).data("readonly")!==!0&&(t._apply.call(this,i),this.opt.click||t._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,i,{type:"click"}),t._target.call(this,i))})},destroy:function(){return n(this).each(function(){var t=n(this),i=t.data("raw");i?t.off(".raty").empty().css({cursor:i.style.cursor,width:i.style.width}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var t=[],i;return n(this).each(function(){i=this.score.val();t.push(i?parseFloat(i):undefined)}),t.length>1?t:t[0]},readOnly:function(i){return this.each(function(){var r=n(this);r.data("readonly")!==i&&(i?(r.off(".raty").children("img").off(".raty"),t._lock.call(this)):(t._binds.call(this),t._unlock.call(this)),r.data("readonly",i))})},reload:function(){return t.set.call(this,{})},score:function(){return arguments.length?t.setScore.apply(this,arguments):t.getScore.call(this)},set:function(t){return this.each(function(){var i=n(this),r=i.data("settings"),u=n.extend({},r,t);i.raty(u)})},setScore:function(i){return n(this).each(function(){n(this).data("readonly")!==!0&&(t._apply.call(this,i),t._target.call(this,i))})}};n.fn.raty=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist!");else return t.init.apply(this,arguments)};n.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"/scripts/raty/img",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:!1,size:16,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",target:undefined,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:undefined}}(jQuery);window.fbAsyncInit=function(){FB.init({appId:"279628188873202",channelUrl:"https://www.cooky.vn/channel.html",status:!0,cookie:!0,xfbml:!0,frictionlessRequests:!0,version:"v2.4"});$(function(){var n=$("#___fl");n.length>0&&FB.getLoginStatus(function(t){if(t.status=="not_authorized"||t.status=="connected"){var i=$.cookie("___fbc");i?n.remove():$(document).mousemove(function(t){n.css({left:t.pageX-15+"px",top:t.pageY-3+"px"});document.activeElement.tagName=="IFRAME"&&($.cookie("___fbc","1",{expires:30,path:"/"}),n.remove())})}})})},function(n){var t,i="facebook-jssdk",r=n.getElementsByTagName("script")[0];n.getElementById(i)||(t=n.createElement("script"),t.id=i,t.async=!0,t.src="//connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(t,r))}(document);$(function(){$(".facebook-invite-friend").on("click",function(){var n=new Date;$.ajax({type:"GET",url:"/Account/IsLogin?"+n.getTime(),success:function(n){n.success==!0&&sendRequestViaMultiFriendSelector()}})})});$(function(){$(".abbrnum").each(function(){$this=$(this);var n=$this.text();n&&$this.text(abbrNum($this.text(),1))})}),function(n){n.fn.goTo=function(t,i){return n("html, body").animate({scrollTop:n(this).offset().top-(i||0)},t!=null?t:"fast"),this}}(jQuery);$(function(){var n=new function(){this.format=function(){for(var i,t=arguments[0],n=0;n<arguments.length-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),t=t.replace(i,arguments[n+1]);return t};this.getUrlParams=function(){var n=window.location.search.substring(1).split("&"),i={},t;for(var r in n)n[r]!==""&&(t=n[r].split("="),i[decodeURIComponent(t[0])]=decodeURIComponent(encodeURIComponent(t[1])));return i};this.goTo=function(){var t=n.getUrlParams(),i;if(t!=null&&t.ref==="notif"){i=null;switch(t.ref_t){case"like":i=n.format("#{0}-review-{1}",t.mention_t,t.mention_id);break;case"comment":i=n.format("#comment-{0}",t.mention_id);break;case"comment_step":i=n.format("#step-{0}",t.mention_id)}$(i)!=null&&setTimeout(function(){$(i).goTo("swing")},1e3)}}};n.goTo();resizeShareBox();$(window).scroll()});$(function(){$("textarea.auto-height").each(function(){h(this)}).on("input",function(){h(this)})});cookyDateFormat=new function(){this.formatDate=function(n){var t=n.replace(/\/Date\((-?\d+)\)\//,"$1");return parseInt(t)}};cookyHtmlHelper=new function(){this.resizeClass=function(n,t){var i=$("."+n).children();i&&i.length>0&&$.each(i,function(n,i){var u=$(i),r=u.find("img");r&&r.length>0&&$.each(r,function(n,i){$(i).css("maxWidth",t+"px")});u.css("maxWidth",t+"px")})};this.goToCommentWidget=function(n,t){$("."+n).goTo("swing",200);$("#"+t).focus()};this.getMetaTagContent=function(n){for(var i=document.getElementsByTagName("meta"),t=0;t<i.length;t++)if(i[t].getAttribute("property")==n)return i[t].getAttribute("content");return""};this.shareFBUi=function(){typeof FB!="undefined"&&FB.ui({method:"feed",name:cookyHtmlHelper.getMetaTagContent("og:title"),link:cookyHtmlHelper.getMetaTagContent("og:url"),picture:cookyHtmlHelper.getMetaTagContent("og:image"),description:cookyHtmlHelper.getMetaTagContent("og:description")})};this.setCookie=function(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u+";path=/"};this.getCookie=function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""};this.eraseCookie=function(n){cookyHtmlHelper.setCookie(n,"",-1)}};var shareboxClosed=!1,resizeShareBox=function(){var t=$("header"),n;$(".share-box").css("top",t.height()+20);n=$(window).width();n<500&&!shareboxClosed&&($("#share-box-close").trigger("click"),shareboxClosed=!0);n>500&&shareboxClosed&&($("#share-box-open").trigger("click"),shareboxClosed=!1)},fixBlogHixOnScrolling=function(){var i=$("header"),n=$(".blog-headline"),r=$(".blog-left"),t=$("article.article-content");$(window).scrollTop()>i.height()||$(window).scrollTop()>99?(n.css({position:"fixed",top:i.height()+1,"z-index":1010,background:"#fff",width:r.width()}),t.css({"padding-top":n.height()+$(".breadcrumb-container.article-breadcrumb").height()+$(".blog-related-list").height()}),t.height()<$(window).scrollTop()-n.height()&&(n.removeAttr("style"),t.removeAttr("style"))):(n.removeAttr("style"),t.removeAttr("style"))};$(window).resize(function(){resizeShareBox()});CommonHelper={initFixHeaderWithPreHeader:function(){jQuery("#head-top").css("margin-top",jQuery(".header-cont").height());jQuery(window).scroll(function(){jQuery(window).scrollTop()>77?jQuery(".header-top").addClass("header-top-fix"):jQuery(".header-top").removeClass("header-top-fix");jQuery("#head-top").css("margin-top",jQuery(".header-cont").height())})},ConvertJsonDate:function(n){return n!==null&&n!==""?new Date(parseInt(n.substr(6))):""},GetSelectedSubMenu:function(){},GetSelectedLeftMenu:function(n,t){n=n.toLowerCase();t=t.toLowerCase();$("div.left-toolbars ul li a").each(function(){var t=$(this).attr("href").toLowerCase();t.endsWith(n)&&$(this).addClass("current")})},ReorganizeLeftMenu:function(){var n=4,t=14,i=16;$("#account-group > li").each(function(r){r>=i?$("#system-group").append($(this)):r>=t?$("#report-group").append($(this)):r>=n&&$("#product-group").append($(this))});$(".left-toolbars > ul > li > a.disable").parent().remove();$(".left-toolbars > ul").each(function(){$(this).children().length===0&&($(this).parent().prev().remove(),$(this).parent().remove())})},SetHeadingTitle:function(n){$("h2#admin-title").html(n);document.title=n;$(".body-content").css("padding-top","20px")},ShowMsg:function(n,t){t!==null&&(n="<span class='"+t+"' style='float: left; margin: 0 7px 20px 0;'><\/span>"+n);$.blockUI({theme:!0,title:"Message",message:"<p>"+n+"<\/p>"});$(".blockOverlay").click($.unblockUI)},AjaxLoading:function(){$.blockUI({theme:!0,title:"Message",message:"<p>Loading, please wait&nbsp;&nbsp;<img src='/Content/Images/icons/ajax-loader.gif' alt='' /><\/p>"})},StopAjaxLoading:function(){$.unblockUI()},FormatThousandSeperator:function(n){$(n).val()!==""&&$(n).val()!=="null"?($(n).next().val($(n).val()),$(n).digits()):$(n).next().val("-1")},RemoveThousandSeperator:function(n){var t=$(n).val();t=t.replace(/,/g,"");$(n).val(t)},PopupPage:function(n,t,i){var f=document.body.offsetHeight,r=document.body.offsetWidth,u=window.open(n,"","width="+t+",height="+i+",resizable=1,scrollbars=yes,location=0");u.moveTo((r-t)/2,50)},Uploadify:function(n,t,i,r,u){$("#"+n).uploadify({swf:"/Scripts/uploadify/uploadify.swf",uploader:"/Common/UploadFile?folder="+t+"&isImage="+i,buttonClass:"uploadImage",buttonText:"Upload",multi:!1,sizeLimit:1048576,cancelImg:"/Scripts/uploadify/uploadify-cancel.png",auto:!0,onUploadSuccess:function(n,t){t=jQuery.parseJSON(t);t.Message!==null&&t.Message!==""?CommonHelper.ShowMsg("Error: "+t.Message,MsgIconType.Error):($("#"+r).val(t.Result),$("#"+r).trigger("change"),i&&($("#"+u).attr("src",t.Optional),$("#"+u).trigger("change")))}})},GetGenderString:function(n){var t="";switch(n){case 0:t="Not Set";break;case 1:t="Male";break;case 2:t="Female";break;default:t="Not Set"}return t},GetTaskStatusString:function(n){var t="";switch(n){case 1:t="<span class='red'>Open<\/span>";break;case 2:t="In progress";break;case 3:t="<span class='green'>Closed<\/span>";break;default:t="Not Set"}return t},GetOrderTypeString:function(n){return n==="2"?"Advertising":"Tool"},GetOrderStatusString:function(n){var t="";switch(n){case 1:t="Pending";break;case 2:t="<span class='green'>Confirmed<\/span>";break;case 3:t="<span class='green'>Completed<\/span>";break;case 4:t="<span class='red'>Cancelled<\/span>";break;case 5:t="Expired";break;case 6:t="<span class='red'>Denied<\/span>";break;default:t="Not Set"}return t},GetDealOrderStatusString:function(n){var t="";switch(n){case 1:t="Pending";break;case 2:t="<span class='green'>Completed<\/span>";break;case 3:t="<span class='green'>Paid<\/span>";break;case 4:t="<span class='red'>Cancel<\/span>";break;case 5:t="<span class='red'>Payment Expired<\/span>";break;default:t="Not Set"}return t},GetDeviceMessageQueryStatusString:function(n){var t="";switch(n){case 1:t="Pending";break;case 2:t="<span class='green'>Processing<\/span>";break;case 3:t="<span class='green'>Completed<\/span>";break;case 4:t="<span class='red'>Error<\/span>"}return t},GetDeviceOSTypesString:function(n){var t="";switch(n){case 1:t="iOS";break;case 2:t="Android";break;case 3:t="WP"}return t},GetReservationOrderStatusString:function(n){var t="";switch(n){case 1:t="Unsubmit";break;case 2:t="Pending";break;case 3:t="<span class='green'>Processing<\/span>";break;case 4:t="<span class='red'>Canceled<\/span>";break;case 5:t="<span class='green'>Completed<\/span>"}return t},HiddenInputSorting:function(n,t){return"<input type='hidden' class='"+n+"' value='"+t+"' />"},SelectResItemFormatResult:function(n){var t="<table><tr>";return n.PictureUrl!==undefined&&(t+="<td style='vertical-align:top'><img src='"+n.PictureUrl+"' width='50' /><\/td>"),t+="<td style='vertical-align:top;padding-left:10px'><div style='font-weight:bold'>"+n.Name+"<\/div>",n.Address!==undefined&&(t+="<div>"+n.Address+"<\/div>"),t+"<\/td><\/tr><\/table>"},SelectResItemFormatSelection:function(n){return n.Name},SelectUserItemFormatResult:function(n){var t="<table><tr>";return n.Avatar!==undefined&&(t+="<td style='vertical-align:top'><img src='"+n.Avatar+"' width='50' /><\/td>"),t+="<td style='vertical-align:top;padding-left:10px'><div style='font-weight:bold'>"+n.UserName+"<\/div>",t+="<div>"+n.FullName+"<\/div>",t+"<\/td><\/tr><\/table>"},SelectUserItemFormatSelection:function(n){return n.UserName},GetUserDetailAdminPage:function(n){return"http://admin.foody.vn/Administration/Security/UserDetail.aspx?id="+n},HasKoBinding:function(n){return!!ko.dataFor(document.getElementById(n))},FormatDateTimeFromDDMM:function(n){return n!==null&&n!==""?n.split("/").reverse().join("-"):null},GetDisplayName:function(n,t,i){return n.length>0&&t.length>0?(n+" "+t).trim():i.trim()}};ko.bindingHandlers.ckeditor={init:function(n,t){var u=ko.utils.unwrapObservable(t()),i,r;$(n).html(u);i=$(n).attr("id");r=CKEDITOR.instances[i];r&&(CKEDITOR.instances=[]);CKEDITOR.replace(i,{width:"750px",height:"300px",filebrowserImageUploadUrl:"/Content/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Images"})},update:function(n,t){var r=ko.utils.unwrapObservable(t()),i,u;$(n).html(r);i=$(n).attr("id");u=CKEDITOR.instances[i];CKEDITOR.instances[i].setData(r)}};ko.bindingHandlers.numericValue={init:function(n,t,i){var r=t(),u=ko.dependentObservable({read:r,write:function(n){isNaN(n)||r(parseFloat(n))}});ko.bindingHandlers.value.init(n,function(){return u},i)},update:ko.bindingHandlers.value.update};String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1};String.prototype.digits=function(){return this.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")};Number.prototype.zeroPad=function(n){var t=n-this.toString().length+1;return Array(+(t>0&&t)).join("0")+this};$.fn.digits=function(){return this.each(function(){$(this).is("input:text")?$(this).val($(this).val().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")):$(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))})};String.prototype.replaceAll=function(n,t){for(var i=this,r=i.indexOf(n);r!==-1;)i=i.replace(n,t),r=i.indexOf(n);return i};Date.prototype.addHours=function(n){return this.setHours(this.getHours()+n),this};Date.isLeapYear=function(n){return n%4==0&&n%100!=0||n%400==0};Date.getDaysInMonth=function(n,t){return[31,Date.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]};Date.prototype.isLeapYear=function(){var n=this.getFullYear();return n%4==0&&n%100!=0||n%400==0};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.addMonths=function(n){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+n),this.setDate(Math.min(t,this.getDaysInMonth())),this};loadingImgSrc="/Style/images/icons/small-loading.gif";progressIndicator=function(n){var t=this;return t.inProcessing=!1,t.uniqueId="cLoadingControl",t.css="",t.src="/content/img/icons/ajax-loader.gif",t.type=n?n:"inline",t.template=function(){return'<div id="'+t.uniqueId+'"><img src="'+t.src+'" /><\/div>'},t.pane=function(){return $(".c-loader-pane").first()},t.container=function(){return $("#"+t.uniqueId).length===0&&t.pane().append(t.template()),$("#"+t.uniqueId)},t.process=function(n){t.inProcessing=n;n?(t.destroy(),t.container().show()):t.container().hide()},t.destroy=function(){t.inProcessing=!1;t.container()&&t.container().remove()},t};cModal=function(){var n=this;return n.caption="",n.content="",n.uniqueId="cooky-confirmbox",n.template=function(){return'<div id="'+n.uniqueId+'" title="'+n.caption+'"><div><div class="cmodal-content"><span>'+n.content+'<\/span><\/div><div class="cmodal-tool"><\/div><div><\/div>'},n.container=function(){return $("#"+n.uniqueId).length===0&&$("body").append(n.template()),$("#"+n.uniqueId)},n.destroy=function(){n.container()&&n.container().remove()},n.close=function(){n.container().dialog("close")},n.confirmPopup=function(t,i,r,u){n.destroy();n.caption=t;n.content=i;n.container(!0).dialog({modal:!0,minWidth:400,position:{my:"center",at:"center",of:window},resizeable:!1,draggable:!0,closeText:"",buttons:[{text:"OK","class":"btn btn-primary",click:function(){r?r():$(this).dialog("close")}},{text:"Cancel","class":"btn btn-default",click:function(){u?(u(),$(this).dialog("close")):$(this).dialog("close")}}]})},n.messagePopup=function(t,i,r){n.destroy();n.caption=t;n.content=i;n.container().dialog({modal:!0,minWidth:400,position:{my:"center",at:"center",of:window},resizeable:!1,draggable:!0,closeText:"",buttons:[{text:"OK","class":"btn btn-primary",click:function(){r?r():$(this).dialog("close")}}]})},n};$(function(){$(".rating-score").raty({readOnly:!0,halfShow:!0,score:function(){return $(this).attr("data-score")/2}})});$(function(){var n=$(".article-main-menu"),e=$(".article-wrapper"),o=$("footer"),i=n.outerWidth(),r=$(window).height(),u=$("header").first().outerHeight(),t,f;n.length>0&&(t=n.offset().left,f=n.offset().top,$(window).scroll(function(){var o=$(window).height();o>n.height()&&($(this).scrollTop()>f?(t=$(".blog-left").offset().left+$(".blog-left").width()+20,n.addClass("fixed"),n.css({left:t+"px",top:u+"px",bottom:"auto",maxWidth:i+"px",maxHeight:r+"px"}),$(".cat-list-purpose").css({maxHeight:"350px",overflow:"hidden"})):(n.removeClass("fixed"),n.css({left:"inherit",top:"inherit",bottom:"auto",position:"relative"})));n.outerHeight()+n.offset().top-u>=e.outerHeight()&&(t=$(".blog-left").offset().left+$(".blog-left").width()+20,n.removeClass("fixed"),n.css({left:t+"px",top:"auto",maxWidth:i+"px",maxHeight:r+"px",bottom:15,position:"absolute"}))}))});Number.prototype.ToMoney=function(n,t,i){var u=this,e=isNaN(n)?0:Math.abs(n),s=t||".",o=typeof i=="undefined"?",":i,h=u<0?"-":"",f=parseInt(u=Math.abs(u).toFixed(e))+"",r=(r=f.length)>3?r%3:0;return h+(r?f.substr(0,r)+o:"")+f.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+o)+(e?s+Math.abs(u-f).toFixed(e).slice(2):"")};var RegisterTextField=function(){var n=this;n.text=ko.observable("");n.isvalid=ko.observable(!1);n.isfirst=ko.observable(!0);n.msg=ko.observable("")},UserRegister=function(){var n=this;n.firstName=new RegisterTextField;n.lastName=new RegisterTextField;n.email=new RegisterTextField;n.password=new RegisterTextField;n.confirmPassword=new RegisterTextField;n.termAndCondition=ko.observable(!0);n.loading=ko.observable(!1);n.updateValid=function(n,t,i){n.isfirst(!1);n.isvalid(t);n.msg(i)};n.firstNameValidate=function(){var t=n.firstName,i=t.text();return!i||i.length==0||$.trim(i)==""?(n.updateValid(t,!1,"Nhập ten"),!1):$.trim(i).length<2?(n.updateValid(t,!1,"Tên phải có ít nhất 2 ký tự"),!1):/^([a-zA-Z ]|[\u00C0-\u1EF9])+([\w\d-_]|[\u00C0-\u1EF9]|[\s]+)*$/.test(i)?(n.updateValid(t,!0,"Tên hợp lệ"),!0):(n.updateValid(t,!1,"Tên không hợp lệ (chứa ký tự đặc biệt hoặc bắt đầu bằng số)"),!1)};n.lastNameValidate=function(){var t=n.lastName,i=t.text();return!i||i.length==0||$.trim(i)==""?(n.updateValid(t,!1,"Nhập họ"),!1):$.trim(i).length<2?(n.updateValid(t,!1,"Họ phải có ít nhất 2 ký tự"),!1):/^([a-zA-Z ]|[\u00C0-\u1EF9])+([\w\d-_]|[\u00C0-\u1EF9]|[\s]+)*$/.test(i)?(n.updateValid(t,!0,"Họ hợp lệ"),!0):(n.updateValid(t,!1,"Họ không hợp lệ (chứa ký tự đặc biệt hoặc bắt đầu bằng số)"),!1)};n.isValidatingEmail=ko.observable(!1);n.emailValidate=function(){var i=n.email,t=i.text(),r,u;if(!t||t.length==0||$.trim(t)=="")return n.updateValid(i,!1,"Nhập email"),!1;if(r=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,!r.test(t))return n.updateValid(i,!1,"Email không hợp lệ"),!1;u=!1;n.isValidatingEmail(!0);$.ajax({url:"/Account/IsValidField",type:"POST",data:{fieldType:"email",fieldName:"Email",fieldValue:t},cache:!1,error:function(){return!0},success:function(t){n.updateValid(i,t.isValid,t.message);u=t.isValid;n.isValidatingEmail(!1)}})};n.passwordValidate=function(){var t=n.password,i=t.text();return!i||i.length==0?(n.updateValid(t,!1,"Nhập mật khẩu"),!1):i.length<4||i.length>20?(n.updateValid(t,!1,"Mật khẩu từ 4 đến 20 ký tự"),!1):(n.updateValid(t,!0,"Mật khẩu hợp lệ"),n.confirmPasswordValidate(),!0)};n.confirmPasswordValidate=function(){var t=n.confirmPassword,r=n.password.text(),i=t.text();return!i||i.length==0?(n.updateValid(t,!1,"Nhập xác nhận mật khẩu"),!1):i!==r?(n.updateValid(t,!1,"Xác nhận mật khẩu không chính xác"),!1):(n.updateValid(t,!0,"Xác nhận mật khẩu chính xác"),!0)};n.isvalid=ko.computed(function(){return n.firstName.isvalid()&&n.lastName.isvalid()&&n.email.isvalid()&&n.password.isvalid()&&n.confirmPassword.isvalid()&&n.termAndCondition()?!0:!1});n.submit=function(){}},UserLogin=function(){var n=this;n.email=ko.observable("");n.password=ko.observable("");n.remember=ko.observable(!0);n.message=ko.observable("");n.submitting=ko.observable(!1);n.isfirst=ko.observable(!0);n.isvalid=ko.computed(function(){var t="";return n.email()==""&&(t+="nhập email"),n.password()==""&&(t==""?t="nhập password":t+=", password"),t==""?(n.message(""),!0):(n.isfirst()||(t="Vui lòng "+t,n.message(t)),!1)});n.passwordPress=function(t,i){var r=i.keyCode;return r==13?(n.submit(),!1):!0};n.submit=function(){n.isvalid()&&!n.submitting()&&(n.isfirst(!1),n.submitting(!0),LoginHelper.Login(n.email(),n.password(),n.remember(),function(){n.submitting(!1)},function(t){n.message(t)}))}},LoginHelper=function(){},justRegister=!1;LoginHelper.RequiredLogin=function(n,t){var i=new Date,r=$.ajax({type:"GET",url:"/Account/IsLogin?"+i.getTime(),success:function(i){i.success==!0?typeof n!="undefined"&&n!=null&&n():LoginHelper.ShowSmallPopup(function(){typeof n!="undefined"&&n!=null&&n();$.modal.close()},t)}});r.then(function(){})};LoginHelper.ShowFacebookRecommendedLogin=function(n,t){$.modal.close();$("#loginFacebookPopup").modal({persist:!0,onClose:function(){$.modal.close();typeof t!="undefined"&&t!=null&&t()}});$("#simplemodal-container").css("height","400px");var i=new Date;$.get("/account/GetFacebookRecommendLogin?t="+i.getTime(),function(n){n.success&&($("#loginFacebookPopup").html(n.html),FB.XFBML.parse($("#loginFacebookPopup")[0]))});$(window).resize();typeof n!="undefined"&&n!=null&&(loginSuccessCallback=n)};LoginHelper.ShowSmallPopup=function(n,t){$.modal.close();var i=$(window).width();$("#login-popup").modal({persist:!0,onClose:function(){typeof t!="undefined"&&t!=null&&t();$.modal.close()},minHeight:550,minWidth:350,maxHeight:500,maxWidth:350,dataCss:{overflow:"hidden",height:500,width:350}});$("#login-popup").show();$("#simplemodal-container").css("height","500px");$("#simplemodal-container").css("width","350px");$("#simplemodal-container").css("border-radius","25px");$(window).resize();LoginHelper.LoginSuccessCallBack=n};LoginHelper.ShowPopup=function(n,t){$.modal.close();var i=$(window).width();$("#login-popup").modal({persist:!0,onClose:function(){typeof t!="undefined"&&t!=null&&t();$.modal.close()},minHeight:i<991?600:350,minWidth:i<991?410:800,dataCss:{overflow:"hidden",height:"auto",width:i<991?410:800}});$("#simplemodal-container").css("height","auto");LoginHelper.LoginSuccessCallBack=n};LoginHelper.Login=function(n,t,i,r,u){$.post("/dang-nhap",{email:n,password:t,rememberMe:i},function(n){n.isSuccess?LoginHelper.LoginSuccess():n.message=="inactive"?window.location="/chua-kich-hoat":n.message=="blockaccount"?window.location="/khoa-tai-khoan":u(n.message);typeof r=="function"&&r(n)})};LoginHelper.LoginSuccessCallBack=null;LoginHelper.LoginSuccess=function(){window.location.pathname!="/dang-nhap"?(LoginHelper.UpdateLoginHeadder(),typeof LoginHelper.LoginSuccessCallBack!="undefined"&&LoginHelper.LoginSuccessCallBack!=null&&LoginHelper.LoginSuccessCallBack()):window.location.reload()};LoginHelper.UpdateLoginHeadder=function(){var n=new Date;$("#header-user-form").load("/account/loginheader?"+n.getTime(),function(){LoginHelper.Init()})};LoginHelper.Init=function(){var n=window.location.pathname;$.trim(n)!="/"&&$("a.logout").attr("href","/dang-xuat?returnUrl="+n);$("#notifications-box").length>0&&notifications==null&&(notifications=new NotificationListModel,ko.applyBindings(notifications,document.getElementById("notifications-box")));$("#friends-box").length>0&&friendRequests==null&&(friendRequests=new FriendRequestModel,ko.applyBindings(friendRequests,document.getElementById("friends-box")))};SocialHelper=function(){};SocialHelper.Login=function(n){var t=640,i=450,r=screen.width/2-t/2,u=screen.height/2-i/2,f=window.open("/social-login/"+n,"socialauthlogin","height="+i+",width="+t+", scrollbars=no, top = "+u+", left="+r,!0);f.document.title="Cooky - Social Oauth"};var userLoginModel=null,userLoginPopupModel=null,bindingUserHeaderLoginModel=!1,bindingUserPopupLoginModel=!1;$(function(){$(".social-login").click(function(){SocialHelper.Login($(this).attr("provider"))});$("#header-login-form").length>0&&(bindingUserHeaderLoginModel||(userLoginModel=new UserLogin,ko.applyBindings(userLoginModel,document.getElementById("header-login-form")),bindingUserHeaderLoginModel=!0,setTimeout(function(){var n=$('#header-login-form input[name="Email"]').val(),t=$('#header-login-form input[name="Password"]').val();userLoginModel.email(n);userLoginModel.password(t)},500)));$("#login-popup-form").length>0&&(bindingUserPopupLoginModel||(userLoginPopupModel=new UserLogin,ko.applyBindings(userLoginPopupModel,document.getElementById("login-popup-form")),bindingUserPopupLoginModel=!0));LoginHelper.Init();$(window).bind("resize",function(){$("#login-popup").css({width:"100%"})})});UserHelper=function(){};UserHelper.TootipScope=null;UserHelper.ApplyTooltip=function(n){var t=$(n).attr("title");$(n).qtip({overwrite:!0,content:{text:""},style:{classes:"qtip-bootstrap",tip:{corner:!1,offset:5}},show:{},hide:{fixed:!0,delay:300},position:{my:"top center",at:"bottom center",target:$(n),viewport:$(window)},events:{show:function(t,i){i.set("content.text",$("#cooky-usertooltip"));UserHelper.TootipScope==null&&(UserHelper.TootipScope=angular.element(document.getElementById("cooky-usertooltip-container")).scope());var r=$(n).attr("data-userid");UserHelper.TootipScope&&UserHelper.TootipScope.getUser(r)}}})};$(".cooky-user-link").each(function(){UserHelper.ApplyTooltip(this)});userTooltipApp=angular.module("userTooltipApp",[]);userTooltipApp.controller("UserTooltipController",["$http","$scope",function(n,t){t.loading=!1;t.users=[];t.selectedUser=null;t.coverImage=function(n){return t.selectedUser!=null?t.selectedUser.Cover!=null&&t.selectedUser.Cover.ImageUrl!=null&&t.selectedUser.Cover.ImageUrl.length>0?t.selectedUser.Cover.ImageUrl:n:n};t.getUser=function(i){t.selectedUser=null;t.loading||(t.loading=!0,n({method:"GET",url:"/member/tooltipinfo/"+i,cache:!1}).success(function(n){user=n;t.users.push(user);t.loading=!1;t.selectedUser=user}))};t.isposting=!1;t.follow=function(i){LoginHelper.RequiredLogin(function(){if(!t.isposting){t.isposting=!0;var r="/friend/"+i.Id+"/follow";n({method:"post",url:r}).success(function(n){n.success==!0?(i.FriendShipStatus=1,t.isposting=!1):(t.isposting=!1,i.FriendShipStatus=n.status)})}})};t.unfollow=function(i){if(!t.isposting){t.isposting=!0;var r="/friend/"+i.Id+"/unfollow";n({method:"post",url:r}).success(function(n){n.success==!0?(i.FriendShipStatus=0,t.isposting=!1):(t.isposting=!1,i.FriendShipStatus=n.status)}).error(function(){t.progressIndicator.process(!1)})}};t.requestadd=function(i){LoginHelper.RequiredLogin(function(){if(!t.isposting){t.isposting=!0;var r="/friend/"+i.Id+"/request";n({method:"post",url:r}).success(function(n){n.success==!0?(i.FriendShipStatus=1,t.isposting=!1):(t.isposting=!1,i.FriendShipStatus=n.status)})}})};t.remove=function(i){if(!t.isposting){t.isposting=!0;var r="/friend/"+i.Id+"/remove";n({method:"post",url:r}).success(function(n){n.success==!0?(i.FriendShipStatus=0,t.isposting=!1):(t.isposting=!1,i.FriendShipStatus=n.status)}).error(function(){t.progressIndicator.process(!1)})}};t.acceptrequest=function(i){if(!t.isposting){t.isposting=!0;var r="/friend/"+i.Id+"/acceptrequest";n({method:"post",url:r}).success(function(n){n.success==!0?(i.FriendShipStatus=2,t.isposting=!1):(t.isposting=!1,i.FriendShipStatus=n.status)})}}}]);bindingAngularBootstrapForCookyTooltip=angular.element(document.querySelector("#cooky-usertooltip-container")).scope();typeof bindingAngularBootstrapForCookyTooltip=="undefined"&&angular.bootstrap(document.getElementById("cooky-usertooltip-container"),["userTooltipApp"]);userModule=angular.module("userModule",[]);userModule.service("userService",["$http",function(){var n=this;n.getCurrentUser=function(n,t){LoginHelper.RequiredLogin(function(){$.ajax({type:"GET",url:"/user/inputinfo",success:function(t){t.success&&typeof n!="undefined"&&n!=null&&n(t.data)},error:function(n){console.log(n)}})},t)}}]);userLinkApp=angular.module("userLinkApp",[]);userLinkApp.controller("userLinkCtrl",["$http","$scope",function(n,t){t.showloading=!1;t.currentInfo=null;t.init=function(i){t.currentInfo===null&&(t.showloading=!0&&!i,n.get("/common/persionalstats").success(function(n){n.Result!==null&&(t.currentInfo=n.Result)}).error(function(){}).finally(function(){t.showloading=!1}))};setTimeout(function(){t.init(!0)},0)}]);FriendRequestModel=function(){var n=this;n.firstload=!1;n.requests=ko.observableArray([]);n.total=ko.observable();n.lastId=0;n.totalRemaining=ko.observable();n.loading=ko.observable(!1);n.relatedTime=null;n.unreadTotal=ko.observable(0);n.load=function(){n.firstload||(n.loading(!0),n.firstload=!0,$.ajax({type:"GET",url:"/notification/friendrequests",cache:!1,success:function(t){var i,r,u;if(t.success){for(i=t.data,r=0;r<i.Items.length;r++)u=i.Items[r],u.posting=ko.observable(!1),n.requests.push(u);$.ajax({type:"GET",url:"/notification/ReadAll?isFriendRequest=true",cache:!1,success:function(t){t.success&&n.unreadTotal(0)},error:function(){}},500);n.lastId=i.LastId;n.total(i.Total);n.totalRemaining(i.Total-i.Items.length);n.loading(!1)}else n.loading(!1)},error:function(){}}))};n.acceptRequest=function(t,i){i.stopPropagation();t.posting()||(t.posting(!0),$.ajax({type:"POST",url:"/friend/"+t.SenderId+"/acceptrequest",success:function(i){i.success==!0?(t.posting(!1),n.requests.remove(t),n.total(n.total()-1),n.totalRemaining(n.totalRemaining()-1),n.loadmore()):t.posting(!1)}}))};n.ignoreRequest=function(t,i){i.stopPropagation();t.posting()||(t.posting(!0),$.ajax({type:"POST",url:"/friend/"+t.SenderId+"/ignorerequest",success:function(i){i.success==!0?(t.posting(!1),n.requests.remove(t),n.total(n.total()-1),n.totalRemaining(n.totalRemaining()-1),n.loadmore()):t.posting(!1)}}))};n.loadmore=function(){!n.loading()&&n.totalRemaining()>0&&(n.loading(!0),n.firstload=!0,$.ajax({type:"GET",url:"/notification/friendrequests?lastid="+n.lastId,cache:!1,success:function(t){var i,r;if(t.success){for(i=t.data,r=0;r<i.Items.length;r++)i.Items[r].posting=ko.observable(!1),n.requests.push(i.Items[r]);n.lastId=i.LastId;n.total(i.Total);n.totalRemaining(i.Total-i.Items.length);n.loading(!1)}else n.loading(!1)},error:function(){}}))}};NotificationListModel=function(){var n=this;n.items=ko.observableArray([]);n.total=ko.observable();n.lastId=0;n.totalRemaining=ko.observable(null);n.loading=ko.observable(!1);n.relatedTime=null;n.unreadTotal=ko.observable(0);n.load=function(){!n.loading()&&(n.totalRemaining()==null||n.totalRemaining()>0)&&(n.loading(!0),$.ajax({type:"GET",url:"/notification/all?lastid="+n.lastId,cache:!1,success:function(t){var i,u,r;if(t.success){for(i=t.data,n.relatedDate==null&&(n.relatedTime=new RelatedTime(i.CurrentTimestamp)),u=0;u<i.Count;u++)r=i.Items[u],r.relatedDate=ko.observable(n.relatedTime.getRelatedTime(r.DateTimestamp,r.DateString)),setInterval(function(){r.relatedDate(n.relatedTime.getRelatedTime(r.DateTimestamp,r.DateString))},5e3),n.items.push(r);$.ajax({type:"GET",url:"/notification/ReadAll",cache:!1,success:function(t){t.success&&n.unreadTotal(0)},error:function(){}},500);n.lastId=i.LastId;n.total(i.Total);n.totalRemaining(i.Total-i.Count);n.loading(!1)}else n.loading(!1)},error:function(){}}))}};$(function(){setTimeout(function(){$.ajax({type:"GET",url:"/notification/unread",cache:!1,success:function(n){n.success&&(typeof notifications!="undefined"&&notifications.unreadTotal(n.data.UnreadNotificationTotal),typeof friendRequests!="undefined"&&friendRequests.unreadTotal(n.data.UnreadFriendRequestTotal))},error:function(){}},500)})});app=angular.module("newsletterApp",[]);app.controller("NewsLetterController",["$http","$scope",function(n,t){t.Email=null;t.Name=null;t.myFunc=function(){t.Email!=""&&t.Name!=""&&n({method:"GET",url:"/Campaign/AddEmailSubscribe?email="+t.Email+"&name="+t.Name}).success(function(n){$("#emailAddress").focus();n.status===1?$("#emailAddress").addClass("input-error"):n.status===2?($("#emailAddress").removeClass("input-error"),t.Email=null):n.status===3&&($("#emailAddress").removeClass("input-error"),t.Email=null,t.Name=null)}).error(function(){})};t.onChange=function(){$("#emailAddress").removeClass("input-error")}}]);searchApp=angular.module("searchApp",["ui.select","collectionHelper","infinite-scroll"]);searchApp.directive("convertToNumber",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.push(function(n){return parseInt(n,10)});r.$formatters.push(function(n){return""+n})}}});searchApp.filter("propsFilter",function(){return function(n,t){var i=[];return angular.isArray(n)?n.forEach(function(n){for(var u,o,f=!1,e=Object.keys(t),r=0;r<e.length;r++)if(u=e[r],o=t[u].toLowerCase(),n[u].toString().toLowerCase().indexOf(o)!==-1){f=!0;break}f&&i.push(n)}):i=n,i}});searchApp.config(["$locationProvider",function(n){n.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!")}]);var searchCtr=searchApp.controller("SearchController",["$scope","$http","$q","$location",function(n,t,i,r){function f(){if(!n.isFilterLoadMore){n.isFilterLoadMore=!0;var i=this,r={Keyword:i.data.Keyword,Type:i.data.FilterType,SelectedIds:i.selectedItems.map(function(n){return n.Id}),PageSize:i.data.PageSize,PageIndex:i.data.PageIndex+1};t({method:"POST",url:"/directory/getfilter",data:r}).success(function(t){for(var r,e,f,u=0;u<t.data.Groups.length;u++)if(r=t.data.Groups[u],e=$.grep(i.data.Groups,function(n){return n.Id===r.Id}),e.length===1)for(f=0;f<r.Items.length;f++)e[0].Items.push(r.Items[f]);else i.data.Groups.push(r);i.data.PageIndex=t.data.PageIndex;n.isFilterLoadMore=!1}).error(function(){n.isFilterLoadMore=!1})}}function e(){var i,s,r,f,u,e;if(!n.isFilterSearch)if(n.isFilterSearch=!0,i=this,i.data.IsLiveSearch)s={Keyword:i.data.Keyword,Type:i.data.FilterType,SelectedIds:i.selectedItems.map(function(n){return n.Id}),PageSize:i.data.PageSize,PageIndex:1},t({method:"POST",url:"/directory/getfilter",data:s}).success(function(t){i.data=t.data;n.isFilterSearch=!1}).error(function(){n.isFilterSearch=!1});else{for(r=0;r<i.data.Groups.length;r++)for(f=i.data.Groups[r],u=0;u<f.Items.length;u++)e=f.Items[u],e.IsHidden=o(e,i.data.Keyword)?!1:!0;n.isFilterSearch=!1;n.$apply()}}function o(n,t){if(t===null||t==="")return!0;var i=new RegExp(t,"i");return n.Name.match(i)!==null||n.AsciiName.match(i)!==null}function s(i){var r=n.filter.FilterTypes.filter(function(n){return n.type===i})[0],u,o;r!==null&&(u=r.selectedItems,n.currentFilterType=i,n.isLoadingFilterBox||(n.isLoadingFilterBox=!0,r.data===null?(o={Keyword:"",Type:i,SelectedIds:u.map(function(n){return n.Id}),PageSize:200,PageIndex:1},t({method:"POST",url:"/directory/getfilter",data:o}).success(function(t){r.data=t.data;r.selectedItems=u;r.canLoadMore=function(){var n=this;return n.data.PageIndex*n.data.PageSize<n.data.Total};r.loadMore=f;r.search=e;r.searchTimerId=null;r.searchKeyPress=function(){n.currentFilters.searchTimerId&&clearTimeout(n.currentFilters.searchTimerId);n.currentFilters.searchTimerId=setTimeout(function(){n.currentFilters.search()},200)};n.currentFilters=r;n.isLoadingFilterBox=!1}).error(function(){n.isLoadingFilterBox=!1})):(n.currentFilters=r,n.isLoadingFilterBox=!1)))}function u(t){var i=n.filter.FilterTypes.filter(function(n){return n.type===t})[0],r,o,f,e,u;if(i!==null){if(r=[],o=[],i.data!==null){for(f=0;f<i.data.Groups.length;f++)for(e=i.data.Groups[f],u=0;u<e.Items.length;u++)e.Items[u].Selected&&r.push(e.Items[u]);i.selectedItems=r}else r=i.selectedItems;return r.map(function(n){return n.Id})}}n.totalItems=json.TotalItems;n.page=json.CurrentPage;n.pageSize=40;n.recipes=json.Recipes;n.currentItems=n.page*n.pageSize;n.currentItems>n.totalItems&&(n.currentItems=n.totalItems);n.hasMoreItems=n.currentItems<n.totalItems;n.isLoading=!1;n.$watchGroup(["page","pageSize"],function(){n.currentItems=n.page*n.pageSize;n.currentItems>n.totalItems&&(n.currentItems=n.totalItems)});n.$watchGroup(["currentItems","totalItems"],function(){n.hasMoreItems=n.currentItems<n.totalItems});n.sortType=json.SortType;n.filter={keyword:json.Keyword};n.filter.ingredient={includes:[],excludes:[]};n.isFirst=0;n.$watchGroup(["filter.ingredient.includes","filter.ingredient.excludes"],function(){if(n.isFirst+1<2){n.isFirst++;return}});n.filter.FilterTypes=[];n.filter.FilterTypes.push({typeName:DirectoryText.Courses,type:"course",data:null,selectedItems:json.Courses});n.filter.FilterTypes.push({typeName:DirectoryText.DishType,type:"dishtype",data:null,selectedItems:json.DishTypes});n.filter.FilterTypes.push({typeName:DirectoryText.Ingredients,type:"ingredienttype",data:null,selectedItems:json.IngredientTypes});n.filter.FilterTypes.push({typeName:DirectoryText.Difficulty,type:"level",data:null,selectedItems:json.RecipeLevels});n.filter.FilterTypes.push({typeName:DirectoryText.Occasions,type:"occasion",data:null,selectedItems:json.Occasions});n.filter.FilterTypes.push({typeName:DirectoryText.Cuisines,type:"cuisine",data:null,selectedItems:json.Cuisines});n.filter.FilterTypes.push({typeName:DirectoryText.CookingMethod,type:"cookingmethod",data:null,selectedItems:json.CookingMethods});n.filter.FilterTypes.push({typeName:DirectoryText.Purposes,type:"purpose",data:null,selectedItems:json.Purposes});n.filter.limitShowItems=5;n.filter.Prices=[{Id:1e5,Name:"100K"},{Id:2e5,Name:"200K"},{Id:5e5,Name:"500K"},{Id:1e6,Name:"1Tr"}];n.filter.Times=[{Id:15,Name:"15 "+Text.Minutes},{Id:30,Name:"30 "+Text.Minutes},{Id:45,Name:"45 "+Text.Minutes},];n.showFilterBox=!1;n.currentFilters={};n.isLoadingFilterBox=!1;n.currentFilterType="";n.isFilterLoadMore=!1;n.isFilterSearch=!1;n.clearSelections=function(t){var i=n.filter.FilterTypes.filter(function(n){return n.type===t})[0],u,f,r;if(i!==null){if(i.selectedItems=[],i.data!==null)for(u=0;u<i.data.Groups.length;u++)for(f=i.data.Groups[u],r=0;r<f.Items.length;r++)f.Items[r].Selected&&(f.Items[r].Selected=!1);n.doSearch();setTimeout(function(){$(".open > .dropdown-menu").css("display","none")},100)}};n.hideSearchFilters=function(){n.showSearchFilters("");n.$apply()};n.filterClick=function(t){t!==n.currentFilterType?n.showSearchFilters(t):n.hideSearchFilters()};n.showSearchFilters=function(t){n.showFilterBox=!0;t!==""?s(t):(n.showFilterBox=!1,n.currentFilterType="")};n.isFilterType=function(t){return n.currentFilters.data!==null?n.currentFilterType===t:!1};n.selectToggle=function(t){return t.Selected=!t.Selected,n.doSearch(),!1};$(document).mouseup(function(n){var t=$("#cooky-search-filter-div"),i=$(".filter-properties"),r=angular.element(document.getElementById("cooky-search-filter-div")).scope();t.is(n.target)||t.has(n.target).length!==0||i.is(n.target)||i.has(n.target).length!==0||r.hideSearchFilters()});n.httpCanceler=i.defer();n.doSearch=function(){n.page=1;n.loadData("/directory/search"+n.buildQuery(n.page,!1),!1)};n.includeIngredients=[];n.excludeIngredients=[];n.searchIngredients=function(t,i){if(n.includeIngredients=[],n.excludeIngredients=[],t&&!(t.length<1)){var r=[];n.filter.Ingredients.forEach(function(n){n.Name.toString().toLowerCase().indexOf(t)!==-1&&r.push(n)});i?n.includeIngredients=r:n.excludeIngredients=r}};n.moreOnScroll=function(t){n.page<=(t||0)+1&&n.loadMore()};n.loadMore=function(){n.isLoading||n.loadData("/directory/search"+n.buildQuery(n.page+1,!0),!0,function(t){t&&(n.page+=1)});n.isLoading=!0};n.loadData=function(i,r,u){n.isLoading=!0;t.get(i,{timeout:n.httpCanceler.promise}).success(function(t){r?angular.forEach(t.recipes,function(t){n.recipes.push(t)}):n.recipes=t.recipes;n.totalItems=t.totalResults;n.isLoading=!1;typeof u=="function"&&u(!0)}).error(function(){n.isLoading=!1;typeof u=="function"&&u(!1)})};n.Goto=function(i,u){n.isLoading!==!0&&t.get(i,{timeout:n.httpCanceler.promise}).success(function(t){r.path(t.url);n.isLoading=!1}).error(function(){n.isLoading=!1;typeof u=="function"&&u(!1)})};n.reDefineView=function(n){return abbrNum(n,1)};n.buildPath=function(n,i,r,u,f,e,o,s){t.get("/directory/BuildPath",{params:{courseIds:n,dishTypeIds:i,ingredientIds:r,difficultyIds:u,occasionIds:f,cookingMethodIds:e,purposeIds:o,cuisineIds:s}}).success(function(){}).error(function(){})};n.buildFilterQuery=function(){var n=u("level"),t=u("cuisine"),i=u("cookingmethod"),r=u("dishtype"),f=u("ingredienttype"),e=u("course"),o=u("occasion"),s=u("purpose");return"?Courses="+e.join()+"&DishTypes="+r.join()+"&IngredientTypes="+f.join()+"&Levels="+n.join()+"&Occasions="+o.join()+"&Cuisines="+t.join()+"&CookingMethods="+i.join()+"&Purposes="+s.join()};n.buildQuery=function(t,i){var f=u("level"),e=u("cuisine"),o=u("cookingmethod"),s=u("dishtype"),h=u("ingredienttype"),c=u("course"),l=u("occasion"),a=u("purpose");return $.trim(n.filter.keyword)!==""?r.search("q",n.filter.keyword):r.search("q",null),n.sortType!==6?r.search("st",n.sortType):r.search("st",null),n.Goto("/directory/FilterGo"+n.buildFilterQuery()),"?q="+n.filter.keyword+"&st="+n.sortType+"&lv="+f.join()+"&cs="+e.join()+"&cm="+o.join()+"&dt="+s.join()+"&igt="+h.join()+"&oc="+l.join()+"&p="+a.join()+"&crs="+c.join()+"&page="+t+"&pageSize="+n.pageSize+"&append="+i}}]),suggestApp=angular.module("suggestApp",[]),searchSuggestTion=suggestApp.controller("SearchSuggestionController",["$http","$scope",function(n,t){t.keyword="";var i=this,r=$("div.search-suggest-panel"),u="/cach-lam";t.totalResults=0;t.items=[];t.itemsTrend=[];t.hasSuggested=function(){return t.totalResults>0};t.viewAllLink=function(){return u+"/"+t.keyword+"&st=7"};t.goDetail=function(n){window.location.href=n.DetailUrl};t.goSearchResults=function(){window.location.href=t.viewAllLink()};i.timerId=null;t.keywordPress=function(){i.timerId&&clearTimeout(i.timerId);i.timerId=setTimeout(t.getSuggest,500)};t.getSuggest=function(){var i=$("ul.trend"),u=$("ul.suggest-recipe");$.trim(t.keyword)!==""?(i.hide(),n({method:"GET",url:"/directory/search?q="+t.keyword+"&st=7&pageSize=10",cache:!1}).success(function(n){t.items=[];n.totalResults>0&&(t.totalResults=n.totalResults,r.show(),u.show(),t.items.push.apply(t.items,n.recipes))})):n({method:"GET",url:"/directory/gettrendkeyword",cache:!1}).success(function(n){t.itemsTrend=[];n.total>0&&(r.show(),i.show(),u.hide(),t.itemsTrend.push.apply(t.itemsTrend,n.items))})};$(document).mouseup(function(n){var t=$("div.search-suggest-panel");t.is(n.target)||t.has(n.target).length!==0||t.hide()})}]);$("#searchform").submit(function(){$.ajax({method:"GET",url:"/Directory/SearchKeyword",data:{keyword:$("#searchimput").val()}}).done(function(n){window.location.href="/cach-lam/"+n.link})});var PhotoViewer=function(){var n=this;n.ShowDialog=function(t,i,r,u,f,e){typeof e!="undefined"&&e!==null&&e.length>0&&initPhotoViewer(e.split("x")[0],e.split("x")[1]);$(".btn-photo-viewer-close").on("click",function(){n.OnCloseDialog()});var o=angular.element(document.getElementById("photoViewerContainer")).scope();o.getPhotos(t,i,r,u,f);$("#cookyphotobox").show()};n.OnCloseDialog=function(){var n=angular.element(document.getElementById("photoViewerContainer")).scope();n.restoreOriginalUrl();$("body").css({overflow:"auto"});$("#cookyphotobox").hide()}},initPhotoViewer=function(n,t){var i=n*1,r=t*1,a=$("#photoViewerContainer"),w=$("#photoViewerContainer #photo-viewer"),b=$("#photoViewerContainer .big-photo"),v=$("#photoViewerContainer img#full-img"),k=$("#photoViewerContainer  #photoInfo"),y=$("#photoViewerContainer"),d=y.width(),e=360,s=560,h=560,c=$(window).height()-100,p=$(window).width()-100,u,f,o,l;i>r?(i=Math.min(Math.max(n,s),1200),r=t*i/n):(r=Math.min(Math.max(t,h),c),i=n*r/t);u=Math.max(Math.min(i+e,p),s+e);f=Math.min(Math.max(h,r),c);u<i+e&&(i=Math.max(u-e,s),r=t*i/n,f=Math.min(Math.max(h,r),c),console.log("true:"+f));o=($(window).height()-f)/2;o<0&&(o=0);l=($(window).width()-u)/2;a.css({width:u+"px",height:f+"px",left:l+"px",top:o+"px"});v.css({position:"absolute"})},resizePhotoContent=function(){var n=width*1,t=height*1,v=$("#photoViewerContainer"),b=$("#photoViewerContainer #photo-viewer"),r=$("#photoViewerContainer .big-photo"),y=$("#photoViewerContainer img#full-img"),k=$("#photoViewerContainer  #photoInfo"),p=$("#photoViewerContainer"),d=p.width(),u=360,h=560,c=560,l=$(window).height()-100,w=$(window).width()-100,i,f,e,a,o,s;n>t?(n=Math.min(Math.max(width,h),1200),t=height*n/width):(t=Math.min(Math.max(height,c),l),n=width*t/height);i=Math.max(Math.min(n+u,w),h+u);f=Math.min(Math.max(c,t),l);i<n+u&&(n=Math.max(i-u,h),t=height*n/width,f=Math.min(Math.max(c,t),l));e=($(window).height()-f)/2;e<0&&(e=0);a=($(window).width()-i)/2;v.css({width:i+"px",height:f+"px",left:a+"px",top:e+"px"});o=n>=r.width()?0:(r.width()-n)/2;s=t>=r.height()?0:(r.height()-t)/2;o<0&&(o=0);s<0&&(s=0);y.css({position:"absolute",top:s+"px",left:o+"px"})},resizePhotoContainer=function(n,t,i){var r=n*1,u=t*1,p=$("#photoViewerContainer"),g=$("#photoViewerContainer #photo-viewer"),o=$("#photoViewerContainer .big-photo"),b=$("#photoViewerContainer img#full-img"),nt=$("#photoViewerContainer  #photoInfo"),k=$("#photoViewerContainer"),tt=k.width(),s=360,a=560,v=560,y=$(window).height()-100,d=$(window).width()-100,f,e,h,w,c,l;r>u?(r=Math.min(Math.max(n,a),1200),u=t*r/n):(u=Math.min(Math.max(t,v),y),r=n*u/t);f=Math.max(Math.min(r+s,d),a+s);e=Math.min(Math.max(v,u),y);i&&(f=Math.max(f,p.width()));f<r+s&&(r=Math.max(f-s,a),u=t*r/n,e=Math.min(Math.max(v,u),y),console.log("true:"+e));h=($(window).height()-e)/2;h<0&&(h=0);w=($(window).width()-f)/2;p.css({width:f+"px",height:e+"px",left:w+"px",top:h+"px"});c=r>=o.width()?0:(o.width()-r)/2;l=u>=o.height()?0:(o.height()-u)/2;c<0&&(c=0);l<0&&(l=0);b.css({position:"absolute",top:l+"px",left:c+"px"})},PhotoModel=function(n,t){var i=this;i.id=n.Id;i.groupType=t;i.title=n.Title;i.note=n.Notes;i.thumbnail=n.ThumbnailUrl;i.img=n.Url;i.albumId=n.AlbumId;i.ownerId=n.OwnerId;i.index=n.Index;i.dimension=n.ImageSize;i.user=null;i.likeCommentModel=null;i.text=n.Text;i.caption=function(){return i.note!==null&&i.note.length>0?i.note:i.text}};$.fn.cookybox=function(){$(this).on("click",function(n){n.preventDefault();var t=$(this).attr("data-id"),i=$(this).attr("data-group"),r=$(this).data("dimen");photoViewer.ShowDialog(t,i,null,null,r)})};$(function(){photoViewer=new PhotoViewer;$(document).on("click",".cooky-photo",null,function(){var n=$(this),t=n.attr("data-id"),i=n.attr("data-group"),r=n.data("dimen"),u=n.find("img").attr("src");photoViewer.ShowDialog(t,i,function(){},null,null,r,u)});$("#cookyphotobox .overlay-box").on("click",function(){$("#cookyphotobox").hide()});$("body").keydown(function(n){n.which==27&&$("#cookyphotobox").hide()});$(".cookybox-photo").on("click",function(n){n.preventDefault();$(".cookybox-wrapper").show();$("body").css({overflow:"hidden"});$(".cookybox-sidebar").css({height:$(window).height(),overflow:"auto"});rePositionPhoto();resizeCartList()});$('a[data-toggle="tab"]').on("shown.bs.tab",function(n){n.target;n.relatedTarget;resizeCartList()});$(".btn-close-box").on("click",function(n){n.preventDefault();$(".cookybox-wrapper").hide();$("body").css({overflow:"initial"})});$(window).bind("resize",function(){rePositionPhoto()})})